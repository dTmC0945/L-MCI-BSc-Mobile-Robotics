<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US">
 <head>
  <title>
   7 Command Line Tools
  </title>
  <meta charset="utf-8"/>
  <meta content="TeX4ht (https://tug.org/tex4ht/)" name="generator"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <link href="MobileRoboticsLectureBook.css" rel="stylesheet" type="text/css"/>
  <meta content="MobileRoboticsLectureBook.tex" name="src"/>
  <script async="async" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/mml-chtml.js" type="text/javascript">
  </script>
  <link href="flatweb.css" rel="stylesheet" type="text/css"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js">
  </script>
  <script src="flatjs.js">
  </script>
  <link href="https://unpkg.com/@highlightjs/cdn-assets@11.3.1/styles/stackoverflow-light.min.css" rel="stylesheet"/>
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.3.1/highlight.min.js">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/dockerfile.min.js">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/makefile.min.js">
  </script>
  <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js">
  </script>
  <link href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" rel="stylesheet"/>
  <script src="flatjs.js">
  </script>
  <header>
  </header>
 </head>
 <body id="top">
  <nav class="wide">
   <div class="contents">
    <h3 style="font-weight:lighter; padding: 20px 0 20px 0;">
     7
   
     
   

   Command Line Tools
    </h3>
    <h4 style="font-weight:lighter">
     Chapter Table of Contents
    </h4>
    <ul>
     <div class="chapterTOCS">
      <li>
       <span class="sectionToc">
        <small>
         7.1
        </small>
        <a href="#x9-1210007.1">
         Setting the Environment
        </a>
       </span>
      </li>
      <li>
       <span class="sectionToc">
        <small>
         7.2
        </small>
        <a href="#x9-1260007.2">
         Turtles and Graphs
        </a>
       </span>
      </li>
      <li>
       <span class="sectionToc">
        <small>
         7.3
        </small>
        <a href="#x9-1340007.3">
         A Deeper Look into Nodes
        </a>
       </span>
      </li>
      <li>
       <span class="sectionToc">
        <small>
         7.4
        </small>
        <a href="#x9-1390007.4">
         Working with Topics
        </a>
       </span>
      </li>
      <li>
       <span class="sectionToc">
        <small>
         7.5
        </small>
        <a href="#x9-1450007.5">
         Working with Services
        </a>
       </span>
      </li>
      <li>
       <span class="sectionToc">
        <small>
         7.6
        </small>
        <a href="#x9-1520007.6">
         Working with Parameters
        </a>
       </span>
      </li>
      <li>
       <span class="sectionToc">
        <small>
         7.7
        </small>
        <a href="#x9-1590007.7">
         A Practical Look into Actions
        </a>
       </span>
      </li>
      <li>
       <span class="sectionToc">
        <small>
         7.8
        </small>
        <a href="#x9-1630007.8">
         Launching Nodes
        </a>
       </span>
      </li>
     </div>
    </ul>
    <div class="prev-next" style="text-align: center">
     <p class="noindent">
      <a href="MobileRoboticsLectureBookli2.html" style="float:right; font-size:10px">
       NEXT CHAPTER →
      </a>
      <a href="MobileRoboticsLectureBookch6.html" style="float:left; font-size:10px">
       ← PREV CHAPTER
      </a>
     </p>
    </div>
    <div id="author-info" style="bottom: 0; padding-bottom: 10px;">
     <div id="author-logo">
      <img src="figures/logo.svg" style="margin: 10px 0;"/>
      <div>
       <div>
        <h4 style="color:#7aa0b8; font-weight:lighter;">
         WebBook | D. T. McGuiness, P.hD
        </h4>
       </div>
      </div>
     </div>
    </div>
   </div>
  </nav>
  <div class="page">
   <article class="chapter">
    <h1 class="chapterHead">
     <div class="number">
      7
     </div>
     <a id="x9-1200007">
     </a>
     Command Line Tools
    </h1>
    <div class="section-control" style="text-align: center">
     <a id="prev-section" onclick="goPrev()" style="float:left;">
      ← Previous Section
     </a>
     <a id="next-section" onclick="goNext()" style="float:right;">
      Next Section →
     </a>
    </div>
    <div class="section-head" id="section-1" sec="section-1">
     <h2 class="sectionHead">
      <a aria-label="Link to this section in PDF version" class="pdf-link" href="MobileRoboticsLectureBook.pdf#section.7.1" style="color: red;  position: absolute;  left: -30px;" target="_blank">
       <svg class="bi bi-file-pdf" fill="currentColor" height="20" viewbox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
        </path>
        <path d="M4.603 12.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.701 19.701 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.187-.012.395-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.065.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.716 5.716 0 0 1-.911-.95 11.642 11.642 0 0 0-1.997.406 11.311 11.311 0 0 1-1.021 1.51c-.29.35-.608.655-.926.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.27.27 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.647 12.647 0 0 1 1.01-.193 11.666 11.666 0 0 1-.51-.858 20.741 20.741 0 0 1-.5 1.05zm2.446.45c.15.162.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.881 3.881 0 0 0-.612-.053zM8.078 5.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z">
        </path>
       </svg>
      </a>
      <small class="titlemark">
       7.1
      </small>
      <a id="x9-1210007.1">
      </a>
      Setting the Environment
     </h2>
     <p class="noindent">
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      relies on the notion of combining workspaces using the shell environment.
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         1
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          1
         </sup>
        </span>
       </alert>
       <span id="textcolor2327">
        In this case, of course, it is
our bash shell.
       </span>
      </span>
      The “workspace” is a
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      term for the location on our system where we’re developing with
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>.
     </p>
     <ul class="itemize1">
      <li class="itemize">
       <p class="noindent">
        the
core
        <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
         ROS
        </a>
        workspace
is
called
the
underlay,
       </p>
      </li>
      <li class="itemize">
       <p class="noindent">
        and
any
subsequent
local
workspaces
are
called
overlays.
       </p>
      </li>
     </ul>
     <p class="noindent">
      When developing with
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>, we will typically have several workspaces active concurrently.
     </p>
     <p class="noindent">
      Combining
workspaces
makes
developing
against
different
versions
of
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>,
or
                                                                                
                                                                                
                                                                           
against
different
sets
of
packages,
easier.
It
also
allows
the
installation
of
several
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      distributions
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         2
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          2
         </sup>
        </span>
       </alert>
       <span id="textcolor2330">
        or
“distros”,
e.g.
Dashing
and
Eloquent.
       </span>
      </span>
      on
the
same
computer
and
switching
between
them.
This
is
accomplished
by
sourcing
setup
files
every
time
we
open
a
new
shell,
or
by
adding
the
source
command
to
our
shell
startup
script
once.
Without
sourcing
the
setup
files,
we
won’t
be
able
to
access
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      commands,
or
find
or
use
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      packages.
     </p>
     <p class="noindent">
      In
other
words,
we
won’t
be
able
to
use
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>.
To
source,
simply
type
the
following:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb127" style="padding:20px;border-radius: 3px;"><a id="x9-121002r41"></a><span id="textcolor2331"># Replace ".bash" with your shell if you're not using bash</span> 
<a id="x9-121004r42"></a><span id="textcolor2332"># Possible values are: setup.bash, setup.sh, setup.zsh</span> 
<a id="x9-121006r43"></a><span id="textcolor2333">source</span><span id="textcolor2334"> </span>/opt/ros/humble/setup.bash</div></pre>
     </div>
     <div class="warning">
      <p class="noindent">
       The
exact
command
depends
on
where
we
installed
       <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
        ROS
       </a>.
Of
course,
if
we
have
installed
       <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
        ROS
       </a>
       using
a
docker
container,
this
section
can
be
skipped.
      </p>
     </div>
     <a id="paragraph*.24">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-122000">
       </a>
       Sourcing
the
Script
      </span>
      If
we
don’t
                                                                                
                                                                                
                                                                            
want
to
have
to
source
the
setup
file
every
time
we
open
a
new
shell,
then
we
can
add
the
command
to
our
shell
startup
script:
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         3
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          3
         </sup>
        </span>
       </alert>
       <span id="textcolor2335">
        For
our
case
it
is <span id="textcolor2336"><code class="verb">.bashrc</code></span>
       </span>
      </span>
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb128" style="padding:20px;border-radius: 3px;"><a id="x9-122002r48"></a><span id="textcolor2337"># Replace ".bash" with your shell if you're not using bash</span> 
<a id="x9-122004r49"></a><span id="textcolor2338">echo</span><span id="textcolor2339"> </span><span id="textcolor2340">"source /opt/ros/humble/setup.bash"</span><span id="textcolor2341"> </span>»<span id="textcolor2342"> </span>~/.bashrc</div></pre>
     </div>
     <a id="paragraph*.25">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-123000">
       </a>
       Checking
Environment
Variables
      </span>
      Sourcing
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      setup
files
will
set
several
environment
variables
necessary
for
operating
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>.
If
we
ever
have
problems
finding
or
using
our
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      packages,
make
sure
that
our
environment
is
properly
set
up
using
the
following
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb129" style="padding:20px;border-radius: 3px;"><a id="x9-123002r54"></a>printenv<span id="textcolor2343"> </span><span id="textcolor2344">|</span><span id="textcolor2345"> </span>grep<span id="textcolor2346"> </span>-i<span id="textcolor2347"> </span>ROS</div></pre>
     </div>
     <div class="informationblock" id="tcolobox-58">
      <div class="title">
       <p class="noindent">
        <span id="bold" style="font-weight:bold;">
         Information
        </span>
        :
The <span id="textcolor2349"><code class="verb">printenv</code></span>
        Command
       </p>
      </div>
      <div class="box-content">
       <p class="noindent">
        Displays the values of environment variables.
       </p>
      </div>
     </div>
     <p class="noindent">
      Using
this
command
let’s
check
all
variables
like <span id="textcolor2350"><code class="verb">ROS_DISTRO</code></span>
      and <span id="textcolor2351"><code class="verb">ROS_VERSION</code></span>
      are
set.
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-59">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb130" style="padding:20px;border-radius: 3px;"><a id="x9-123004r1"></a>ROS_VERSION=2 
<a id="x9-123006r2"></a>ROS_PYTHON_VERSION=3 
<a id="x9-123008r3"></a>AMENT_PREFIX_PATH=/opt/ros/humble 
<a id="x9-123010r4"></a>PYTHONPATH=/opt/ros/humble/lib/python3.10/site-packages:/opt/ros/humble/local/lib/python3.10/dist-packages 
<a id="x9-123012r5"></a>LD_LIBRARY_PATH=/opt/ros/humble/opt/rviz_ogre_vendor/lib:/opt/ros/humble/lib/aarch64-linux-gnu:/opt/ros/humble/lib 
<a id="x9-123014r6"></a>ROS_LOCALHOST_ONLY=0 
<a id="x9-123016r7"></a>PATH=/opt/ros/humble/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
<a id="x9-123018r8"></a>ROS_DISTRO=humble</div></pre>
       </div>
      </div>
     </div>
     <div class="warning">
      <p class="noindent">
       If
the
environment
variables
are
       <span id="bold" style="font-weight:bold;">
        NOT
       </span>
       set
correctly,
it
might
be
worthwhile
to
reinstall
       <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
        ROS
       </a>.
      </p>
     </div>
     <a id="paragraph*.26">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-124000">
       </a>
       The
ROS
Domain
ID
Variable
      </span>
      Once
we
have
determined
a
      <alert style="color: #821131;">
       unique
integer
      </alert>
      for
our
group
of
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      nodes,
we
can
set
the
environment
variable
with
the
following
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb131" style="padding:20px;border-radius: 3px;"><a id="x9-124002r71"></a><span id="textcolor2352">export</span><span id="textcolor2353"> </span><span id="textcolor2354">ROS_DOMAIN_ID</span><span id="textcolor2355">=</span>&lt;your_domain_id&gt;</div></pre>
     </div>
     <p class="noindent">
      To
maintain
this
setting
between
shell
sessions,
we
can
also
add
the
command
to
our
shell
startup
script <span id="textcolor2356"><code class="verb">.bashrc</code></span>
      :
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb132" style="padding:20px;border-radius: 3px;"><a id="x9-124004r76"></a><span id="textcolor2357">echo</span><span id="textcolor2358"> </span><span id="textcolor2359">"export ROS_DOMAIN_ID=&lt;your_domain_id&gt;"</span><span id="textcolor2360"> </span>»<span id="textcolor2361"> </span>~/.bashrc</div></pre>
     </div>
     <a id="paragraph*.27">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-125000">
       </a>
       Changing
the
Localhost
Variable
      </span>
      By
default,
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      communication
is
      <span id="bold" style="font-weight:bold;">
       NOT
      </span>
      limited
to
localhost.
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         4
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          4
         </sup>
        </span>
       </alert>
       <span id="textcolor2362">
        Localhost
is
a
form
of
hostname,
meaning
the
specific
computer
that
the
program
is
running
on.
It
is
employed
as
a
method
of
connecting
to
services
on
the
network
on
the
physical
host
machine
without
the
services
of
an
outer
network.
When
using
“localhost”,
we
are
connected
to
our
computer
or
the
node
that
is
addressed
by
                                                                                
                                                                                
the
IP
address
127.
Often
used
for
testing
and
development,
it
lets
developers
run
and
test
Web
applications,
or
any
other
network
service,
locally
before
putting
them
on
a
live
server.
To
summarize,
it
can
be
mentioned
that
localhost
is
the
loopback
network
interface.
       </span>
      </span> <span id="textcolor2363"><code class="verb">ROS_LOCALHOST_ONLY</code></span>
      environment
variable
allows
us
to
limit
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      communication
to
localhost
only.
     </p>
     <p class="noindent">
      This
means
our
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      system,
and
its
topics,
services,
and
actions
                                                                                
                                                                                
will
      <span id="bold" style="font-weight:bold;">
       NOT
      </span>
      be
visible
to
other
computers
on
the
local
network.
     </p>
     <p class="noindent">
      Using <span id="textcolor2364"><code class="verb">ROS_LOCALHOST_ONLY</code></span>
      is
helpful
in
certain
settings,
such
as
classrooms,
where
multiple
robots
may
publish
to
the
same
topic
causing
strange
behaviors.
We
can
set
the
environment
variable
with
the
following
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb133" style="padding:20px;border-radius: 3px;"><a id="x9-125002r81"></a><span id="textcolor2365">export</span><span id="textcolor2366"> </span><span id="textcolor2367">ROS_LOCALHOST_ONLY</span><span id="textcolor2368">=</span><span id="textcolor2369">1</span></div></pre>
     </div>
     <p class="noindent">
      Of
course,
to
maintain
it
across
different
shell
session
we
can
write
this
command
to
our <span id="textcolor2370"><code class="verb">.bashrc</code></span>
      :
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb134" style="padding:20px;border-radius: 3px;"><a id="x9-125004r86"></a><span id="textcolor2371">echo</span><span id="textcolor2372"> </span><span id="textcolor2373">"export ROS_LOCALHOST_ONLY=1"</span><span id="textcolor2374"> </span>»<span id="textcolor2375"> </span>~/.bashrc</div></pre>
     </div>
     <p class="noindent">
     </p>
    </div>
    <div class="section-head" id="section-2" sec="section-2">
     <h2 class="sectionHead">
      <a aria-label="Link to this section in PDF version" class="pdf-link" href="MobileRoboticsLectureBook.pdf#section.7.2" style="color: red;  position: absolute;  left: -30px;" target="_blank">
       <svg class="bi bi-file-pdf" fill="currentColor" height="20" viewbox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
        </path>
        <path d="M4.603 12.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.701 19.701 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.187-.012.395-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.065.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.716 5.716 0 0 1-.911-.95 11.642 11.642 0 0 0-1.997.406 11.311 11.311 0 0 1-1.021 1.51c-.29.35-.608.655-.926.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.27.27 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.647 12.647 0 0 1 1.01-.193 11.666 11.666 0 0 1-.51-.858 20.741 20.741 0 0 1-.5 1.05zm2.446.45c.15.162.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.881 3.881 0 0 0-.612-.053zM8.078 5.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z">
        </path>
       </svg>
      </a>
      <small class="titlemark">
       7.2
      </small>
      <a id="x9-1260007.2">
      </a>
      Turtles  and  Graphs
     </h2>
     <p class="noindent">
      Turtlesim is a great introduction to
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      as it is a lightweight simulator and easy to work on. It illustrates what
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      does
at the most basic level to give us an idea of what we will do with a real robot or a robot simulation later on.
     </p>
     <p class="noindent">
      The <span id="textcolor2376"><code class="verb">ros2</code></span>
      tool is how the user manages, introspects, and interacts with a ROS system. It
supports multiple commands which target different aspects of the system and its operation.
     </p>
     <p class="noindent">
     </p>
     <div class="quoteblock">
      <p class="noindent">
       One
might
use
it
to
start
a
node,
set
a
parameter,
listen
to
a
topic,
and
many
more.
      </p>
     </div>
     <div class="warning">
      <p class="noindent">
       The <span id="textcolor2377"><code class="verb">ros2</code></span>
       tool is part of the core
       <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
        ROS
       </a>
       installation and should already be installed. This can easily be tested by typing <span id="textcolor2378"><code class="verb">ros2</code></span>
       into a terminal.
      </p>
     </div>
     <p class="noindent">
      The  second  tool  is <span id="textcolor2379"><code class="verb">rqt</code></span>,  a
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:gui">
       GUI
      </a>
      tool  for
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>.
     </p>
     <div class="knowledge">
      <p class="noindent">
       Everything done in <span id="textcolor2380"><code class="verb">rqt</code></span>
       can be done using
       <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:cli">
        CLI
       </a>, but <span id="textcolor2381"><code class="verb">rqt</code></span>
       provides a more user-friendly way to manipulate
       <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
        ROS
       </a>
       elements.
      </p>
     </div>
     <p class="noindent">
      We will work together to understand the fundamental concept which build the core of
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>, like nodes, topics, and services. All of these concepts will be elaborated on later.
     </p>
     <p class="noindent">
      For now, we will simply set up the tools and get a feel for them.
      <a id="paragraph*.28">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-127000">
       </a>
       Installing  the  Required  Packages
      </span>
      In case of
      <span id="bold" style="font-weight:bold;">
       NOT
      </span>
      having a configured docker container which was discussed in detail
previously, please use the following commands to install all the necessary packages.
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb135" style="padding:20px;border-radius: 3px;"><a id="x9-127002r93"></a>sudo<span id="textcolor2382"> </span>apt<span id="textcolor2383"> </span>update 
<a id="x9-127004r94"></a>sudo<span id="textcolor2384"> </span>apt<span id="textcolor2385"> </span>install<span id="textcolor2386"> </span>ros-humble-turtlesim</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-60">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb136" style="padding:20px;border-radius: 3px;"><a id="x9-127006r1"></a>0 upgraded, 0 newly installed, 0 to remove and 6 not upgraded.</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      To check if the package is installed, run the following command in the terminal:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb137" style="padding:20px;border-radius: 3px;"><a id="x9-127008r104"></a>ros2<span id="textcolor2387"> </span>pkg<span id="textcolor2388"> </span>executables<span id="textcolor2389"> </span>turtlesim</div></pre>
     </div>
     <p class="noindent">
      which should return a list of turtlesim’s executable options:
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-61">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb138" style="padding:20px;border-radius: 3px;"><a id="x9-127010r1"></a>turtlesim draw_square 
<a id="x9-127012r2"></a>turtlesim mimic 
<a id="x9-127014r3"></a>turtlesim turtle_teleop_key 
<a id="x9-127016r4"></a>turtlesim turtlesim_node</div></pre>
       </div>
      </div>
     </div>
     <a id="paragraph*.29">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-128000">
       </a>
       Installing  and  Starting  Turtlesim
      </span>
      Let’s  begin  the  tutorial  by  starting  turtlesim:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb139" style="padding:20px;border-radius: 3px;"><a id="x9-128002r117"></a>ros2<span id="textcolor2390"> </span>run<span id="textcolor2391"> </span>turtlesim<span id="textcolor2392"> </span>turtlesim_node</div></pre>
     </div>
     <p class="noindent">
      Under the command, we will see messages from the node. There we can see the default turtle’s name and the coordinates where it spawns.
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-62">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb140" style="padding:20px;border-radius: 3px;"><a id="x9-128004r1"></a>QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-ubuntu' 
<a id="x9-128006r2"></a>[INFO] [1748967100.900464593] [turtlesim]: Starting turtlesim with node name /turtlesim 
<a id="x9-128008r3"></a>[INFO] [1748967100.908647551] [turtlesim]: Spawning turtle [turtle1] at x=[5.544445], y=[5.544445], theta=[0.000000]</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      The
simulator
window
should
appear,
with
a
random
turtle
in
the
centre.
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         5
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <img alt="PIC" height="" src="figures/Command-Line-Tools/raster/tsim-1.png" width="100%"/>
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          5
         </sup>
        </span>
       </alert>
       <span id="textcolor2393">
        Here
we
can
see
the
turtlebot
in
its
natural
habitat,
the
turtlesim
environment.
The
type
of
the
turtle
changes
every
time
a
new
turtlesim
environment
is
called.
All
these
turtles
represent
a
version
of
        <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
         ROS
        </a>.
       </span>
      </span>
      <a id="paragraph*.30">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-129000">
       </a>
       Making
the
Turtle
                                                                                
                                                                                
                                                                            
Move
Around
      </span>
      Now,
      <alert style="color: #821131;">
       open
a
new
terminal
      </alert>
      and
if
it
is
      <span id="bold" style="font-weight:bold;">
       NOT
      </span>
      automatic,
source
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      again.
Now
we
will
run
a
new
node
to
control
the
turtle
in
the
first
node:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb141" style="padding:20px;border-radius: 3px;"><a id="x9-129002r130"></a>ros2<span id="textcolor2394"> </span>run<span id="textcolor2395"> </span>turtlesim<span id="textcolor2396"> </span>turtle_teleop_key</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-63">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb142" style="padding:20px;border-radius: 3px;"><a id="x9-129004r1"></a>Reading from keyboard 
<a id="x9-129006r2"></a>--------------------------- 
<a id="x9-129008r3"></a>Use arrow keys to move the turtle. 
<a id="x9-129010r4"></a>Use G|B|V|C|D|E|R|T keys to rotate to absolute orientations. 'F' to cancel a rotation. 
<a id="x9-129012r5"></a>'Q' to quit.</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      At
this
point
we
should
have
three
<alert style="color: #821131;">(3)</alert> windows
open:
     </p>
     <ul class="itemize1">
      <li class="itemize">
       <p class="noindent">
        a
terminal
running <span id="textcolor2398"><code class="verb">turtlesim_node</code></span>,
       </p>
      </li>
      <li class="itemize">
       <p class="noindent">
        a
terminal
                                                                                
                                                                                
     
running <span id="textcolor2400"><code class="verb">turtle_teleop_key</code></span>,
and
       </p>
      </li>
      <li class="itemize">
       <p class="noindent">
        the
turtlesim
window
itself.
       </p>
      </li>
     </ul>
     <p class="noindent">
      Let’s
arrange
these
windows
so
we
can
see
the
turtlesim
window,
but
also
have
the
terminal
running <span id="textcolor2402"><code class="verb">turtle_teleop_key</code></span>
      active
so
that
we
can
control
the
turtle
in
turtlesim
using
the
arrow
keys
on
the
keyboard.
It
will
move
around
the
screen,
using
its
attached
“pen”
to
draw
the
path
it
followed
so
far.
     </p>
     <div class="warning">
      <p class="noindent">
       Pressing
an
arrow
key
will
only
cause
the
turtle
to
move
a
short
distance
and
then
stop.
This
is
because,
realistically,
we
wouldn’t
want
a
robot
to
continue
carrying
on
an
instruction
if,
for
example,
the
operator
lost
the
connection
to
the
robot.
      </p>
     </div>
     <p class="noindent">
      We
can
see
the
nodes,
and
their
associated
topics,
services,
and
actions,
using
the
list
sub-commands
of
the
respective
commands:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb143" style="padding:20px;border-radius: 3px;"><a id="x9-129014r144"></a><span id="textcolor2403">echo</span><span id="textcolor2404"> </span><span id="textcolor2405">"~~ Node information ~~"</span><span id="textcolor2406"> </span><span id="textcolor2407">&amp;&amp;</span> 
<a id="x9-129016r145"></a><span id="textcolor2408">   </span>ros2<span id="textcolor2409"> </span>node<span id="textcolor2410"> </span>list<span id="textcolor2411"> </span><span id="textcolor2412">&amp;&amp;</span> 
<a id="x9-129018r146"></a><span id="textcolor2413">   </span><span id="textcolor2414">echo</span><span id="textcolor2415"> </span><span id="textcolor2416">"~~ Topic information ~~"</span><span id="textcolor2417"> </span><span id="textcolor2418">&amp;&amp;</span> 
<a id="x9-129020r147"></a><span id="textcolor2419">   </span>ros2<span id="textcolor2420"> </span>topic<span id="textcolor2421"> </span>list<span id="textcolor2422"> </span><span id="textcolor2423">&amp;&amp;</span> 
<a id="x9-129022r148"></a><span id="textcolor2424">   </span><span id="textcolor2425">echo</span><span id="textcolor2426"> </span><span id="textcolor2427">"~~ Service information ~~"</span><span id="textcolor2428"> </span><span id="textcolor2429">&amp;&amp;</span> 
<a id="x9-129024r149"></a><span id="textcolor2430">   </span>ros2<span id="textcolor2431"> </span>service<span id="textcolor2432"> </span>list<span id="textcolor2433"> </span><span id="textcolor2434">&amp;&amp;</span> 
<a id="x9-129026r150"></a><span id="textcolor2435">   </span><span id="textcolor2436">echo</span><span id="textcolor2437"> </span><span id="textcolor2438">"~~ Action information ~~"</span><span id="textcolor2439"> </span><span id="textcolor2440">&amp;&amp;</span> 
<a id="x9-129028r151"></a><span id="textcolor2441">   </span>ros2<span id="textcolor2442"> </span>action<span id="textcolor2443"> </span>list<span id="textcolor2444"> </span></div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-64">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb144" style="padding:20px;border-radius: 3px;"><a id="x9-129030r1"></a>~~ Node information ~~ 
<a id="x9-129032r2"></a>/teleop_turtle 
<a id="x9-129034r3"></a>/turtlesim 
<a id="x9-129036r4"></a>~~ Topic information ~~ 
<a id="x9-129038r5"></a>/parameter_events 
<a id="x9-129040r6"></a>/rosout 
<a id="x9-129042r7"></a>/turtle1/cmd_vel 
<a id="x9-129044r8"></a>/turtle1/color_sensor 
<a id="x9-129046r9"></a>/turtle1/pose 
<a id="x9-129048r10"></a>~~ Service information ~~ 
<a id="x9-129050r11"></a>/clear 
<a id="x9-129052r12"></a>/kill 
<a id="x9-129054r13"></a>/reset 
<a id="x9-129056r14"></a>/spawn 
<a id="x9-129058r15"></a>/teleop_turtle/describe_parameters 
<a id="x9-129060r16"></a>/teleop_turtle/get_parameter_types 
<a id="x9-129062r17"></a>/teleop_turtle/get_parameters 
<a id="x9-129064r18"></a>/teleop_turtle/list_parameters 
<a id="x9-129066r19"></a>/teleop_turtle/set_parameters 
<a id="x9-129068r20"></a>/teleop_turtle/set_parameters_atomically 
<a id="x9-129070r21"></a>/turtle1/set_pen 
<a id="x9-129072r22"></a>/turtle1/teleport_absolute 
<a id="x9-129074r23"></a>/turtle1/teleport_relative 
<a id="x9-129076r24"></a>/turtlesim/describe_parameters 
<a id="x9-129078r25"></a>/turtlesim/get_parameter_types 
<a id="x9-129080r26"></a>/turtlesim/get_parameters 
<a id="x9-129082r27"></a>/turtlesim/list_parameters 
<a id="x9-129084r28"></a>/turtlesim/set_parameters 
<a id="x9-129086r29"></a>/turtlesim/set_parameters_atomically 
<a id="x9-129088r30"></a>~~ Action information ~~ 
<a id="x9-129090r31"></a>/turtle1/rotate_absolute</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      Don’t
worry
about
what
this
all
means
as
we
will
have
a
detailed
look
into
each
of
them
in
a
later
part.
      <a id="paragraph*.31">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-130000">
       </a>
       Running
rqt
      </span> <span id="textcolor2445"><code class="verb">rqt</code></span>
      is
a
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:gui">
       GUI
      </a>
      framework
which
implements
various
tools
and
interfaces
in
the
form
of
plugins.
If
it
is
not
installed
on
our
system
please
run
the
following
commands:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb145" style="padding:20px;border-radius: 3px;"><a id="x9-130002r192"></a>sudo<span id="textcolor2446"> </span>apt<span id="textcolor2447"> </span>update 
<a id="x9-130004r193"></a>sudo<span id="textcolor2448"> </span>apt<span id="textcolor2449"> </span>install<span id="textcolor2450"> </span><span id="textcolor2451">'~nros-humble-rqt*'</span></div></pre>
     </div>
     <p class="noindent">
      Once
installed,
running
it
is
pretty
straightforward:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb146" style="padding:20px;border-radius: 3px;"><a id="x9-130006r199"></a>rqt</div></pre>
     </div>
     <p class="noindent">
      When
running <span id="textcolor2452"><code class="verb">rqt</code></span>
      for
the
first
time,
the
window
will
be
blank.
This
is
normal.
To
see
what
is
currently
going
on
just
select <span id="textcolor2453"><code class="verb">Plugins/Services/Service Caller</code></span>
      from
the
menu
bar
at
the
top.
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         6
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <img alt="PIC" height="" src="figures/Command-Line-Tools/raster/rqt-1.png" width="100%"/>
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          6
         </sup>
        </span>
       </alert>
       <span id="textcolor2454">
        The
view
of <span id="textcolor2455"><code class="verb">rqt</code></span>
        with
only
turtlesim
and
teleop
running.
       </span>
      </span>
     </p>
     <p class="noindent">
      Use
the
refresh
button
to
the
left
of
the
Service
                                                                                
                                                                                
                                                                         
dropdown
list
to
ensure
all
the
services
of
our
turtlesim
node
are
available.
Once
refreshed,
click
on
the
Service
dropdown
list
to
see
services
belonging
to <span id="textcolor2456"><code class="verb">turtlesim</code></span>,
and
select
the <span id="textcolor2457"><code class="verb">/spawn</code></span>
      service.
      <a id="paragraph*.32">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-131000">
       </a>
       Working
the
the
spawn
service
      </span>
      Let’s
use <span id="textcolor2458"><code class="verb">rqt</code></span>
      to
call
the <span id="textcolor2459"><code class="verb">/spawn</code></span>
      service.
We
can
guess
from
its
name
that <span id="textcolor2460"><code class="verb">/spawn</code></span>
      will
create
another
turtle
in
the
turtlesim
window.
     </p>
     <aside class="wrapfig-r">
      <img alt="PIC" height="" src="figures/Command-Line-Tools/raster/rqt-2.png" width="100%"/>
      <a id="x9-131001r1">
      </a>
      <figcaption class="caption">
       <span class="id">
        Figure 7.1:
       </span>
       <span class="content">
        Generating a new turtlebot to be
spawned.
       </span>
      </figcaption>
     </aside>
     <p class="noindent">
      Give
the
new
turtle
a
unique
name,
like <span id="textcolor2461"><code class="verb">turtle2</code></span>,
by
double-clicking
between
the
empty
single
quotes
in
the
Expression
column.
We
can
see
that
this
expression
corresponds
to
the
value
of
name
and
is
of
type
string.
     </p>
     <p class="noindent">
      Next
enter
some
valid
coordinates
at
which
to
spawn
the
new
turtle,
like <span id="textcolor2462"><code class="verb">x = 1.0</code></span>
      and <span id="textcolor2463"><code class="verb">y = 1.0</code></span>.
     </p>
     <div class="warning">
      <p class="noindent">
       If
we
try
to
spawn
a
new
                                                                                
                                                                                
                                                                            
turtle
with
the
same
name
as
an
existing
turtle,
like
the
default
turtle1,
we
will
get
an
error
message
in
the
terminal
running <span id="textcolor2464"><code class="verb">turtlesim_node</code></span>.
      </p>
     </div>
     <p class="noindent">
      To
spawn <span id="textcolor2465"><code class="verb">turtle2</code></span>,
we
then
need
to
call
the
service
by
clicking
the
Call
button
on
the
upper
right
side
of
the <span id="textcolor2466"><code class="verb">rqt</code></span>
      window.
     </p>
     <p class="noindent">
      If
the
service
call
was
successful,
we
should
see
a
new
turtle,
again
with
a
random
design.
spawn
                                                                                
                                                                                
                                                                              
at
the
coordinates
we
input
for <span id="textcolor2467"><code class="verb">x</code></span>
      and <span id="textcolor2468"><code class="verb">y</code></span>.
     </p>
     <p class="noindent">
      If
we
refresh
the
service
list
in <span id="textcolor2469"><code class="verb">rqt</code></span>,
we
will
also
see
that
now
there
are
services
related
to
the
new
turtle, <span id="textcolor2470"><code class="verb">turtle2</code></span>,
in
addition
to <span id="textcolor2471"><code class="verb">turtle1</code></span>.
      <a id="paragraph*.33">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-132000">
       </a>
       Changing
the
Trail
Parameters
      </span>
      Now
let’s
give <span id="textcolor2472"><code class="verb">turtle1</code></span>
      a
unique
pen
using
the <span id="textcolor2473"><code class="verb">/set_pen</code></span>
      service:
     </p>
     <figure class="figure">
      <div class="subfigure" style="width:49%;">
       <p class="noindent">
       </p>
       <p class="noindent">
        <img alt="PIC" height="" src="figures/Command-Line-Tools/raster/rqt-3.png" width=""/>
        <a id="x9-132001r1">
        </a>
       </p>
       <div class="caption">
        <span class="id">
         (a)
        </span>
        <span class="content">
         The parameters of the <span id="textcolor2475"><code class="verb">/set_pen</code></span>
         service.
        </span>
       </div>
      </div>
      <div class="subfigure" style="width:49%;">
       <p class="noindent">
       </p>
       <p class="noindent">
        <img alt="PIC" height="" src="figures/Command-Line-Tools/raster/tsim-3.png" width=""/>
        <a id="x9-132002r2">
        </a>
       </p>
       <div class="caption">
        <span class="id">
         (b)
        </span>
        <span class="content">
         The trail line of <span id="textcolor2477"><code class="verb">turtle1</code></span>
         has changed
        </span>
       </div>
      </div>
     </figure>
     <p class="noindent">
      The
values
for <span id="textcolor2478"><code class="verb">r</code></span>, <span id="textcolor2479"><code class="verb">g</code></span>,
and <span id="textcolor2480"><code class="verb">b</code></span>,
which
are
between
0
and
255,
set
the
colour
of
the
pen <span id="textcolor2481"><code class="verb">turtle1</code></span>
      draws
with,
and
width
sets
the
thickness
of
the
line.
     </p>
     <p class="noindent">
      To
have <span id="textcolor2482"><code class="verb">turtle1</code></span>
      draw
with
a
distinct
red
line,
change
the
value
of <span id="textcolor2483"><code class="verb">r</code></span>
      to
255,
and
the
value
of
width
to
5.
     </p>
     <div class="warning">
      <p class="noindent">
       Don’t
forget
to
call
the
service
after
updating
the
values.
      </p>
     </div>
     <p class="noindent">
      If
we
were
to
return
to
the
terminal
where <span id="textcolor2484"><code class="verb">turtle_teleop_key</code></span>
      is
running
and
press
the
arrow
keys,
we
will
see <span id="textcolor2485"><code class="verb">turtle1</code></span>
      ’s
pen
has
changed
and
also
noticed
that
there’s
no
way
to
move <span id="textcolor2486"><code class="verb">turtle2</code></span>.
That’s
because
there
is
no
teleop
node
for <span id="textcolor2487"><code class="verb">turtle2</code></span>.
      <a id="paragraph*.34">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-133000">
       </a>
       Remapping
Controls
      </span>
      We
need
a
second
teleop
node
in
order
to
control <span id="textcolor2488"><code class="verb">turtle2</code></span>.
However,
if
we
try
to
run
                                                                                
                                                                                
                                                                              
the
same
command
as
before,
we
will
notice
that
this
one
also
controls <span id="textcolor2489"><code class="verb">turtle1</code></span>.
The
way
to
change
this
behavior
is
by
remapping
the <span id="textcolor2490"><code class="verb">cmd_vel</code></span>
      topic.
     </p>
     <p class="noindent">
      To
do
that,
In
a
new
terminal,
source
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>,
and
run:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb147" style="padding:20px;border-radius: 3px;"><a id="x9-133002r274"></a>ros2<span id="textcolor2491"> </span>run<span id="textcolor2492"> </span>turtlesim<span id="textcolor2493"> </span>turtlesim_node<span id="textcolor2494"> </span>--ros-args<span id="textcolor2495"> </span>--remap<span id="textcolor2496"> </span>__node:<span id="textcolor2497">=</span>my_turtle</div></pre>
     </div>
     <p class="noindent">
      Now,
we
can
move <span id="textcolor2498"><code class="verb">turtle2</code></span>
      when
this
terminal
is
active,
and <span id="textcolor2499"><code class="verb">turtle1</code></span>
      when
the
other
terminal
running <span id="textcolor2500"><code class="verb">turtle_teleop_key</code></span>
      is
active.
     </p>
     <p class="noindent">
     </p>
    </div>
    <div class="section-head" id="section-3" sec="section-3">
     <h2 class="sectionHead">
      <a aria-label="Link to this section in PDF version" class="pdf-link" href="MobileRoboticsLectureBook.pdf#section.7.3" style="color: red;  position: absolute;  left: -30px;" target="_blank">
       <svg class="bi bi-file-pdf" fill="currentColor" height="20" viewbox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
        </path>
        <path d="M4.603 12.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.701 19.701 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.187-.012.395-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.065.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.716 5.716 0 0 1-.911-.95 11.642 11.642 0 0 0-1.997.406 11.311 11.311 0 0 1-1.021 1.51c-.29.35-.608.655-.926.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.27.27 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.647 12.647 0 0 1 1.01-.193 11.666 11.666 0 0 1-.51-.858 20.741 20.741 0 0 1-.5 1.05zm2.446.45c.15.162.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.881 3.881 0 0 0-.612-.053zM8.078 5.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z">
        </path>
       </svg>
      </a>
      <small class="titlemark">
       7.3
      </small>
      <a id="x9-1340007.3">
      </a>
      A
Deeper
Look
into
Nodes
     </h2>
     <p class="noindent">
      Each node in
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      should be responsible for a
      <alert style="color: #821131;">
       single
      </alert>
      ,
      <alert style="color: #821131;">
       modular purpose
      </alert>
      .
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         7
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          7
         </sup>
        </span>
       </alert>
       <span id="textcolor2501">
        e.g., controlling the wheel motors or
publishing the sensor data from a laser range-finder.
       </span>
      </span>
      Each node can send and receive data from other nodes using:
     </p>
     <ul class="itemize1">
      <li class="itemize">
       <p class="noindent">
        topics,
       </p>
      </li>
      <li class="itemize">
       <p class="noindent">
        services,
       </p>
      </li>
      <li class="itemize">
       <p class="noindent">
        actions,
or
       </p>
      </li>
      <li class="itemize">
       <p class="noindent">
        parameters.
       </p>
      </li>
     </ul>
     <p class="noindent">
      A
full
robotic
system
is
comprised
of
many
interconnected
nodes
working
in
unison.
In
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>,
for
example,
a
single
executable
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         8
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          8
         </sup>
        </span>
       </alert>
       <span id="textcolor2506">
        C++
program,
Python
program,
etc.
       </span>
      </span>
      can
contain
one
or
more
nodes.
      <a id="paragraph*.35">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-135000">
       </a>
       ros2
run
      </span>
      Now
let’s
put
all
this
knowledge
into
motion.
The
command <span id="textcolor2507"><code class="verb">ros2 run</code></span>
      launches
an
executable
from
a
package.
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb148" style="padding:20px;border-radius: 3px;"><a id="x9-135002r216"></a>ros2<span id="textcolor2508"> </span>run<span id="textcolor2509"> </span>&lt;package_name&gt;<span id="textcolor2510"> </span>&lt;executable_name&gt;</div></pre>
     </div>
     <p class="noindent">
      To
run
turtlesim,
open
a
new
terminal
(
      <kbd>
       Ctrl
      </kbd>
      +
      <kbd>
       Alt
      </kbd>
      +
      <kbd>
       T
      </kbd>
      ),
and
enter
the
following
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb149" style="padding:20px;border-radius: 3px;"><a id="x9-135004r222"></a>ros2<span id="textcolor2511"> </span>run<span id="textcolor2512"> </span>turtlesim<span id="textcolor2513"> </span>turtlesim_node</div></pre>
     </div>
     <p class="noindent">
      Here,
the
package
name
is
turtlesim
and
the
executable
name
is <span id="textcolor2514"><code class="verb">turtlesim_node</code></span>.
We
still
don’t
know
the
node
name,
however.
      <a id="paragraph*.36">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-136000">
       </a>
       ros2
node
list
      </span>
      We
can
find
node
names
by
using <span id="textcolor2515"><code class="verb">ros2 node list</code></span>,
which
will
show
us
the
names
of
all
running
nodes.
This
is
especially
useful
when
we
want
to
interact
with
a
node,
or
when
we
have
a
system
running
many
nodes
and
need
to
keep
track
of
them.
     </p>
     <p class="noindent">
      Open
a
new
terminal
while
turtlesim
is
      <alert style="color: #821131;">
       still
running
in
the
other
one
      </alert>
      ,
and
enter
the
                                                                                
                                                                                
                                                                          
following
command.
The
terminal
will
return
the
node
name:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb150" style="padding:20px;border-radius: 3px;"><a id="x9-136002r232"></a>ros2<span id="textcolor2516"> </span>node<span id="textcolor2517"> </span>list</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-65">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb151" style="padding:20px;border-radius: 3px;"><a id="x9-136004r1"></a>/turtlesim</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      Open
another
new
terminal
and
start
the
teleop
node
with
the
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb152" style="padding:20px;border-radius: 3px;"><a id="x9-136006r242"></a>ros2<span id="textcolor2518"> </span>run<span id="textcolor2519"> </span>turtlesim<span id="textcolor2520"> </span>turtle_teleop_key</div></pre>
     </div>
     <p class="noindent">
      Here,
we
are
referring
to
the
turtlesim
package
again,
but
this
time
we
target
the
executable
named <span id="textcolor2521"><code class="verb">turtle_teleop_key</code></span>.
     </p>
     <p class="noindent">
      Return
to
the
terminal
where
we
ran
ros2
node
list
and
run
                                                                                
                                                                                
                                                                               
it
again.
We
will
now
see
the
names
of
two
active
nodes:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb153" style="padding:20px;border-radius: 3px;"><a id="x9-136008r247"></a>ros2<span id="textcolor2522"> </span>node<span id="textcolor2523"> </span>list</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-66">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb154" style="padding:20px;border-radius: 3px;"><a id="x9-136010r1"></a>/turtlesim 
<a id="x9-136012r2"></a>/teleop_turtle</div></pre>
       </div>
      </div>
     </div>
     <a id="paragraph*.37">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-137000">
       </a>
       Remapping
a
Node
      </span>
      Remapping
allows
us
to
reassign
default
node
properties:
     </p>
     <p class="noindent">
     </p>
     <div class="quoteblock">
      <p class="noindent">
       like
node
name,
topic
names,
service
names,
etc.,
to
custom
values.
      </p>
     </div>
     <p class="noindent">
      Previously,
we
have
used
remapping
on <span id="textcolor2524"><code class="verb">turtle_teleop_key</code></span>
      to
change
the <span id="textcolor2525"><code class="verb">cmd_vel</code></span>
      topic
and
target <span id="textcolor2526"><code class="verb">turtle2</code></span>.
     </p>
     <p class="noindent">
      Now,
let’s
reassign
the
name
of
our <span id="textcolor2527"><code class="verb">/turtlesim</code></span>
      node.
In
a
new
terminal,
run
the
following
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb155" style="padding:20px;border-radius: 3px;"><a id="x9-137002r258"></a>ros2<span id="textcolor2528"> </span>run<span id="textcolor2529"> </span>turtlesim<span id="textcolor2530"> </span>turtlesim_node<span id="textcolor2531"> </span>--ros-args<span id="textcolor2532"> </span>--remap<span id="textcolor2533"> </span>__node:<span id="textcolor2534">=</span>my_turtle</div></pre>
     </div>
     <p class="noindent">
      Since
we’re
calling <span id="textcolor2535"><code class="verb">ros2 run</code></span>
      on
turtlesim
again,
another
turtlesim
window
will
open.
However,
now
if
we
return
to
the
terminal
where
we
ran <span id="textcolor2536"><code class="verb">ros2 node list</code></span>,
and
run
it
again,
we
will
see
three
<alert style="color: #821131;">(3)</alert> node
names:
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-67">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb156" style="padding:20px;border-radius: 3px;"><a id="x9-137004r1"></a>/my_turtle 
<a id="x9-137006r2"></a>/turtlesim 
<a id="x9-137008r3"></a>/teleop_turtle</div></pre>
       </div>
      </div>
     </div>
     <a id="paragraph*.38">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-138000">
       </a>
       ros2
node
info
      </span>
      Now
that
we
know
the
names
of
our
nodes,
we
can
access
more
information
about
them
with:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb157" style="padding:20px;border-radius: 3px;"><a id="x9-138002r282"></a>ros2<span id="textcolor2537"> </span>node<span id="textcolor2538"> </span>info<span id="textcolor2539"> </span>&lt;node_name&gt;</div></pre>
     </div>
     <p class="noindent">
      To
examine
our
latest
node, <span id="textcolor2540"><code class="verb">my_turtle</code></span>,
run
the
following
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb158" style="padding:20px;border-radius: 3px;"><a id="x9-138004r287"></a>ros2<span id="textcolor2541"> </span>node<span id="textcolor2542"> </span>info<span id="textcolor2543"> </span>/my_turtle</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-68">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb159" style="padding:20px;border-radius: 3px;"><a id="x9-138006r1"></a>/my_turtle 
<a id="x9-138008r2"></a>  Subscribers: 
<a id="x9-138010r3"></a>   /parameter_events: rcl_interfaces/msg/ParameterEvent 
<a id="x9-138012r4"></a>   /turtle1/cmd_vel: geometry_msgs/msg/Twist 
<a id="x9-138014r5"></a>  Publishers: 
<a id="x9-138016r6"></a>   /parameter_events: rcl_interfaces/msg/ParameterEvent 
<a id="x9-138018r7"></a>   /rosout: rcl_interfaces/msg/Log 
<a id="x9-138020r8"></a>   /turtle1/color_sensor: turtlesim/msg/Color 
<a id="x9-138022r9"></a>   /turtle1/pose: turtlesim/msg/Pose 
<a id="x9-138024r10"></a>  Service Servers: 
<a id="x9-138026r11"></a>   /clear: std_srvs/srv/Empty 
<a id="x9-138028r12"></a>   /kill: turtlesim/srv/Kill 
<a id="x9-138030r13"></a>   /my_turtle/describe_parameters: rcl_interfaces/srv/DescribeParameters 
<a id="x9-138032r14"></a>   /my_turtle/get_parameter_types: rcl_interfaces/srv/GetParameterTypes 
<a id="x9-138034r15"></a>   /my_turtle/get_parameters: rcl_interfaces/srv/GetParameters 
<a id="x9-138036r16"></a>   /my_turtle/list_parameters: rcl_interfaces/srv/ListParameters 
<a id="x9-138038r17"></a>   /my_turtle/set_parameters: rcl_interfaces/srv/SetParameters 
<a id="x9-138040r18"></a>   /my_turtle/set_parameters_atomically: rcl_interfaces/srv/SetParametersAtomically 
<a id="x9-138042r19"></a>   /reset: std_srvs/srv/Empty 
<a id="x9-138044r20"></a>   /spawn: turtlesim/srv/Spawn 
<a id="x9-138046r21"></a>   /turtle1/set_pen: turtlesim/srv/SetPen 
<a id="x9-138048r22"></a>   /turtle1/teleport_absolute: turtlesim/srv/TeleportAbsolute 
<a id="x9-138050r23"></a>   /turtle1/teleport_relative: turtlesim/srv/TeleportRelative 
<a id="x9-138052r24"></a>  Service Clients: 
<a id="x9-138054r25"></a> 
<a id="x9-138056r26"></a>  Action Servers: 
<a id="x9-138058r27"></a>   /turtle1/rotate_absolute: turtlesim/action/RotateAbsolute 
<a id="x9-138060r28"></a>  Action Clients:</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent"> <span id="textcolor2544"><code class="verb">ros2 node info</code></span>
      returns
a
list
of
subscribers,
publishers,
services,
and
actions.
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         9
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          9
         </sup>
        </span>
       </alert>
       <span id="textcolor2545">
        i.e.,
the
        <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
         ROS
        </a>
        graph
connections
that
                                                                                
                                                                                
                                                                           
interact
with
that
node.
       </span>
      </span>
     </p>
     <p class="noindent">
      Now
try
running
the
same
command
on
the <span id="textcolor2546"><code class="verb">/teleop_turtle</code></span>
      node,
and
see
how
its
connections
differ
from <span id="textcolor2547"><code class="verb">my_turtle</code></span>.
     </p>
     <p class="noindent">
     </p>
    </div>
    <div class="section-head" id="section-4" sec="section-4">
     <h2 class="sectionHead">
      <a aria-label="Link to this section in PDF version" class="pdf-link" href="MobileRoboticsLectureBook.pdf#section.7.4" style="color: red;  position: absolute;  left: -30px;" target="_blank">
       <svg class="bi bi-file-pdf" fill="currentColor" height="20" viewbox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
        </path>
        <path d="M4.603 12.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.701 19.701 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.187-.012.395-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.065.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.716 5.716 0 0 1-.911-.95 11.642 11.642 0 0 0-1.997.406 11.311 11.311 0 0 1-1.021 1.51c-.29.35-.608.655-.926.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.27.27 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.647 12.647 0 0 1 1.01-.193 11.666 11.666 0 0 1-.51-.858 20.741 20.741 0 0 1-.5 1.05zm2.446.45c.15.162.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.881 3.881 0 0 0-.612-.053zM8.078 5.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z">
        </path>
       </svg>
      </a>
      <small class="titlemark">
       7.4
      </small>
      <a id="x9-1390007.4">
      </a>
      Working
with
Topics
     </h2>
     <p class="noindent">
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      breaks
complex
systems
down
into
many
modular
nodes.
Topics
are
a
vital
element
of
the
ROS
graph
that
act
as
a
bus
for
nodes
to
exchange
messages.
     </p>
     <p class="noindent">
      A
node
may
publish
data
to
any
number
of
topics
and
simultaneously
have
subscriptions
to
any
number
of
topics.
     </p>
     <p class="noindent">
      Topics
are
one
of
the
main
ways
in
which
data
                                                                                
                                                                                
                                                                               
is
moved
between
nodes
and
therefore
between
different
parts
of
the
system.
     </p>
     <p class="noindent">
      To
begin
we
start
with
a
fresh
new
terminal
(
      <kbd>
       Ctrl
      </kbd>
      +
      <kbd>
       Alt
      </kbd>
      +
      <kbd>
       T
      </kbd>
      )
and
type
the
following
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb160" style="padding:20px;border-radius: 3px;"><a id="x9-139002r601"></a>ros2<span id="textcolor2548"> </span>run<span id="textcolor2549"> </span>turtlesim<span id="textcolor2550"> </span>turtlesim_node</div></pre>
     </div>
     <p class="noindent">
      And
of
course
we
would
like
to
control
this
turtle
so
we
need
to
add
the <span id="textcolor2551"><code class="verb">teleop</code></span>
      node
as
well.
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb161" style="padding:20px;border-radius: 3px;"><a id="x9-139004r606"></a>ros2<span id="textcolor2552"> </span>run<span id="textcolor2553"> </span>turtlesim<span id="textcolor2554"> </span>turtle_teleop_key</div></pre>
     </div>
     <a id="paragraph*.39">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-140000">
       </a>
       Graphing
the
Topics
      </span>
      Throughout
this
tutorial,
we
will
use <span id="textcolor2555"><code class="verb">rqt_graph</code></span>
      to
visualize
the
changing
nodes
and
topics,
as
well
as
the
connections
between
them.
     </p>
     <p class="noindent">
      The
turtlesim
tutorial
tells
us
how
to
install
rqt
and
all
its
plugins,
including <span id="textcolor2556"><code class="verb">rqt_graph</code></span>.
     </p>
     <p class="noindent">
      To
run <span id="textcolor2557"><code class="verb">rqt_graph</code></span>,
open
a
new
terminal
and
enter
the
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb162" style="padding:20px;border-radius: 3px;"><a id="x9-140002r329"></a>rqt_graph</div></pre>
     </div>
     <div class="figure">
      <p class="noindent">
       <img alt="PIC" height="" src="figures/Command-Line-Tools/raster/rqt-graph-1.png" width="150%"/>
       <a id="x9-140003r2">
       </a>
      </p>
      <figcaption class="caption">
       <span class="id">
        Figure 7.2:
       </span>
       <span class="content">
        A visual representation of the communication happening between the nodes <span id="textcolor2560"><code class="verb">/turtlesim</code></span>
        and <span id="textcolor2561"><code class="verb">/teleop</code></span>.
       </span>
      </figcaption>
     </div>
     <p class="noindent">
      Wou
should
see
the
above
nodes
and
topic,
as
well
as
two
<alert style="color: #821131;">(2)</alert> actions
around
the
periphery
of
the
graph.
If
we
hover
your
mouse
over
the
topic
in
the
centre,
we’ll
see
the
color
highlighting.
     </p>
     <p class="noindent">
      The
graph
is
depicting
how
the <span id="textcolor2562"><code class="verb">/turtlesim</code></span>
      node
and
the <span id="textcolor2563"><code class="verb">/teleop_turtle</code></span>
      node
are
communicating
with
each
other
over
a
topic.
The <span id="textcolor2564"><code class="verb">/teleop_turtle</code></span>
      node
is
publishing
data
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         10
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          10
         </sup>
        </span>
       </alert>
       <span id="textcolor2565">
        the
keystrokes
you
enter
                                                                                
                                                                                
                                                                              
to
move
the
turtle
around
       </span>
      </span>
      to
the <span id="textcolor2566"><code class="verb">/turtle1/cmd_vel</code></span>
      topic,
and
the <span id="textcolor2567"><code class="verb">/turtlesim</code></span>
      node
is
subscribed
to
that
topic
to
receive
the
data.
     </p>
     <div class="knowledge">
      <p class="noindent">
       The
highlighting
feature
of <span id="textcolor2568"><code class="verb">rqt_graph</code></span>
       is
very
helpful
when
examining
more
complex
systems
with
many
nodes
and
topics
connected
in
many
different
ways.
      </p>
     </div>
     <a id="paragraph*.40">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-141000">
       </a>
       ros2
topic
list
      </span>
      Running
the <span id="textcolor2569"><code class="verb">ros2 topic list</code></span>
      command
in
a
new
terminal
will
return
a
                                                                                
                                                                                
                                                                              
list
of
all
the
topics
currently
active
in
the
system:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb163" style="padding:20px;border-radius: 3px;"><a id="x9-141002r336"></a>ros2<span id="textcolor2570"> </span>topic<span id="textcolor2571"> </span>list</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-69">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb164" style="padding:20px;border-radius: 3px;"><a id="x9-141004r1"></a>/parameter_events 
<a id="x9-141006r2"></a>/rosout 
<a id="x9-141008r3"></a>/turtle1/cmd_vel 
<a id="x9-141010r4"></a>/turtle1/color_sensor 
<a id="x9-141012r5"></a>/turtle1/pose</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      Alternatively,
running <span id="textcolor2572"><code class="verb">ros2 topic list -t</code></span>
      will
return
the
same
list
of
topics,
this
time
with
the
topic
type
appended
in
brackets:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb165" style="padding:20px;border-radius: 3px;"><a id="x9-141014r350"></a>ros2<span id="textcolor2573"> </span>topic<span id="textcolor2574"> </span>list<span id="textcolor2575"> </span>-t</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-70">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb166" style="padding:20px;border-radius: 3px;"><a id="x9-141016r1"></a>/parameter_events [rcl_interfaces/msg/ParameterEvent] 
<a id="x9-141018r2"></a>/rosout [rcl_interfaces/msg/Log] 
<a id="x9-141020r3"></a>/turtle1/cmd_vel [geometry_msgs/msg/Twist] 
<a id="x9-141022r4"></a>/turtle1/color_sensor [turtlesim/msg/Color] 
<a id="x9-141024r5"></a>/turtle1/pose [turtlesim/msg/Pose]</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      These
attributes,
particularly
the
type,
are
how
nodes
know
theyre
talking
about
the
same
information
                                                                                
                                                                                
                                                                              
as
it
moves
over
topics.
     </p>
     <p class="noindent">
      If
youre
wondering
where
all
these
topics
are
in <span id="textcolor2576"><code class="verb">rqt_graph</code></span>,
you
can
uncheck
all
the
boxes
under
Hide:
     </p>
     <div class="figure">
      <p class="noindent">
       <img alt="PIC" height="" src="figures/Command-Line-Tools/raster/rqt-graph-2.png" width="150%"/>
       <a id="x9-141025r3">
       </a>
      </p>
      <figcaption class="caption">
       <span class="id">
        Figure 7.3:
       </span>
       <span class="content">
       </span>
      </figcaption>
     </div>
     <a id="paragraph*.41">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-142000">
       </a>
       ros2
topic
echo
      </span>
      To
see
the
data
being
published
on
a
topic,
use:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb167" style="padding:20px;border-radius: 3px;"><a id="x9-142002r366"></a>ros2<span id="textcolor2577"> </span>topic<span id="textcolor2578"> </span><span id="textcolor2579">echo</span><span id="textcolor2580"> </span>&lt;topic_name&gt;</div></pre>
     </div>
     <p class="noindent">
      Since
we
know
that <span id="textcolor2581"><code class="verb">/teleop_turtle</code></span>
      publishes
data
to <span id="textcolor2582"><code class="verb">/turtlesim</code></span>
      over
the <span id="textcolor2583"><code class="verb">/turtle1/cmd_vel</code></span>
      topic,
lets
use
echo
to
introspect
that
topic:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb168" style="padding:20px;border-radius: 3px;"><a id="x9-142004r371"></a>ros2<span id="textcolor2584"> </span>topic<span id="textcolor2585"> </span><span id="textcolor2586">echo</span><span id="textcolor2587"> </span>/turtle1/cmd_vel</div></pre>
     </div>
     <p class="noindent">
      At
first,
this
command
wont
return
any
data.
Thats
because
its
waiting
for <span id="textcolor2588"><code class="verb">/teleop_turtle</code></span>
      to
publish
something.
     </p>
     <p class="noindent">
      Return
to
the
                                                                                
                                                                                
                                                                          
terminal
where <span id="textcolor2589"><code class="verb">turtle_teleop_key</code></span>
      is
running
and
use
the
arrows
to
move
the
turtle
around.
Watch
the
terminal
where
your
echo
is
running
at
the
same
time,
and
youll
see
position
data
being
published
for
every
movement
you
make:
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-71">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb169" style="padding:20px;border-radius: 3px;"><a id="x9-142006r1"></a>linear: 
<a id="x9-142008r2"></a>  x: 2.0 
<a id="x9-142010r3"></a>  y: 0.0 
<a id="x9-142012r4"></a>  z: 0.0 
<a id="x9-142014r5"></a>angular: 
<a id="x9-142016r6"></a>  x: 0.0 
<a id="x9-142018r7"></a>  y: 0.0 
<a id="x9-142020r8"></a>  z: 0.0 
<a id="x9-142022r9"></a>  ---</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      Now
return
to <span id="textcolor2590"><code class="verb">rqt_graph</code></span>
      and
uncheck
the
Debug
box.
     </p>
     <div class="figure">
      <p class="noindent">
       <img alt="PIC" height="" src="figures/Command-Line-Tools/raster/rqt-graph-3.png" width="150%"/>
       <a id="x9-142023r4">
       </a>
      </p>
      <figcaption class="caption">
       <span class="id">
        Figure 7.4:
       </span>
       <span class="content">
       </span>
      </figcaption>
     </div>
     <p class="noindent"> <span id="textcolor2591"><code class="verb">/_ros2cli_5707</code></span>
      is
the
node
created
by
the
echo
command
we
just
ran
(the
number
might
be
different).
Now
you
can
see
that
the
publisher
is
publishing
data
over
the <span id="textcolor2592"><code class="verb">cmd_vel</code></span>
      topic,
and
two
<alert style="color: #821131;">(2)</alert> subscribers
are
subscribed
to
it.
      <a id="paragraph*.42">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-143000">
       </a>
       ros2
topic
info
      </span>
      Topics
dont
have
to
only
be
one-to-one
communication;
they
can
be
one-to-many,
many-to-one,
or
many-to-many.
     </p>
     <p class="noindent">
      Another
way
to
look
at
this
                                                                                
                                                                                
                                                                               
is
running:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb170" style="padding:20px;border-radius: 3px;"><a id="x9-143002r391"></a>ros2<span id="textcolor2593"> </span>topic<span id="textcolor2594"> </span>info<span id="textcolor2595"> </span>/turtle1/cmd_vel</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-72">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb171" style="padding:20px;border-radius: 3px;"><a id="x9-143004r1"></a>Type: geometry_msgs/msg/Twist 
<a id="x9-143006r2"></a>Publisher count: 1 
<a id="x9-143008r3"></a>Subscription count: 2</div></pre>
       </div>
      </div>
     </div>
     <a id="paragraph*.43">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-144000">
       </a>
       ros2
interface
show
      </span>
      Nodes
send
data
over
topics
using
messages.
Publishers
and
subscribers
must
send
and
receive
the
same
type
of
message
to
communicate.
     </p>
     <p class="noindent">
      The
topic
types
we
saw
earlier
after
running <span id="textcolor2596"><code class="verb">ros2 topic list -t</code></span>
      let
us
know
what
message
type
is
used
on
each
topic.
Recall
that
the <span id="textcolor2597"><code class="verb">cmd_vel</code></span>
      topic
has
                                                                                
                                                                                
                                                                              
the
type:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb172" style="padding:20px;border-radius: 3px;"><a id="x9-144002r405"></a>geometry_msgs/msg/Twist</div></pre>
     </div>
     <p class="noindent">
      This
means
that
in
the
package <span id="textcolor2598"><code class="verb">geometry_msgs</code></span>
      there
is
a
msg
called
Twist.
     </p>
     <p class="noindent">
      Now
we
can
run
ros2
interface
show <span id="textcolor2599"><code class="verb">&lt;msg_type&gt;</code></span>
      on
this
type
to
learn
its
details.
Specifically,
what
structure
of
data
the
message
expects.
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb173" style="padding:20px;border-radius: 3px;"><a id="x9-144004r410"></a>ros2<span id="textcolor2600"> </span>interface<span id="textcolor2601"> </span>show<span id="textcolor2602"> </span>geometry_msgs/msg/Twist</div></pre>
     </div>
     <p class="noindent">
      Which
will
return
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-73">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb174" style="padding:20px;border-radius: 3px;"><a id="x9-144006r1"></a># This expresses velocity in free space broken into its linear and angular parts. 
<a id="x9-144008r2"></a>    Vector3  linear 
<a id="x9-144010r3"></a>            float64 x 
<a id="x9-144012r4"></a>            float64 y 
<a id="x9-144014r5"></a>            float64 z 
<a id="x9-144016r6"></a>    Vector3  angular 
<a id="x9-144018r7"></a>            float64 x 
<a id="x9-144020r8"></a>            float64 y 
<a id="x9-144022r9"></a>            float64 z</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      This
tells
you
that
the
/turtlesim
node
is
expecting
                                                                                
                                                                                
                                                                               
a
message
with
two
vectors,
linear
and
angular,
of
three
elements
each.
If
you
recall
the
data
we
saw <span id="textcolor2603"><code class="verb">/teleop_turtle</code></span>
      passing
to
/turtlesim
with
the
echo
command,
its
in
the
same
structure:
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-74">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb175" style="padding:20px;border-radius: 3px;"><a id="x9-144024r1"></a>linear: 
<a id="x9-144026r2"></a>  x: 2.0 
<a id="x9-144028r3"></a>  y: 0.0 
<a id="x9-144030r4"></a>  z: 0.0 
<a id="x9-144032r5"></a>angular: 
<a id="x9-144034r6"></a>  x: 0.0 
<a id="x9-144036r7"></a>  y: 0.0 
<a id="x9-144038r8"></a>  z: 0.0 
<a id="x9-144040r9"></a>  ---</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
     </p>
    </div>
    <div class="section-head" id="section-5" sec="section-5">
     <h2 class="sectionHead">
      <a aria-label="Link to this section in PDF version" class="pdf-link" href="MobileRoboticsLectureBook.pdf#section.7.5" style="color: red;  position: absolute;  left: -30px;" target="_blank">
       <svg class="bi bi-file-pdf" fill="currentColor" height="20" viewbox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
        </path>
        <path d="M4.603 12.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.701 19.701 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.187-.012.395-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.065.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.716 5.716 0 0 1-.911-.95 11.642 11.642 0 0 0-1.997.406 11.311 11.311 0 0 1-1.021 1.51c-.29.35-.608.655-.926.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.27.27 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.647 12.647 0 0 1 1.01-.193 11.666 11.666 0 0 1-.51-.858 20.741 20.741 0 0 1-.5 1.05zm2.446.45c.15.162.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.881 3.881 0 0 0-.612-.053zM8.078 5.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z">
        </path>
       </svg>
      </a>
      <small class="titlemark">
       7.5
      </small>
      <a id="x9-1450007.5">
      </a>
      Working
with
Services
     </h2>
     <p class="noindent">
      As
a
brief
review,
services
are
yet
another
method
of
communication
for
nodes
in
the
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      graph.
Services
are
based
on
a
call-and-response
model
versus
the
publisher-subscriber
model
of
topics.
While
topics
allow
nodes
to
subscribe
to
data
streams
and
get
continual
updates,
services
only
provide
data
when
they
are
specifically
called
by
a
client.
     </p>
     <p class="noindent">
      To
begin
                                                                                
                                                                                
                                                                              
we
start
with
a
fresh
new
terminal
(
      <kbd>
       Ctrl
      </kbd>
      +
      <kbd>
       Alt
      </kbd>
      +
      <kbd>
       T
      </kbd>
      )
and
type
the
following
command
to
start
the <span id="textcolor2604"><code class="verb">/turtlesim</code></span>
      and <span id="textcolor2605"><code class="verb">/teleop_turtle</code></span>
      nodes:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb176" style="padding:20px;border-radius: 3px;"><a id="x9-145002r459"></a>ros2<span id="textcolor2606"> </span>run<span id="textcolor2607"> </span>turtlesim<span id="textcolor2608"> </span>turtlesim_node</div></pre>
     </div>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb177" style="padding:20px;border-radius: 3px;"><a id="x9-145004r464"></a>ros2<span id="textcolor2609"> </span>run<span id="textcolor2610"> </span>turtlesim<span id="textcolor2611"> </span>turtle_teleop_key</div></pre>
     </div>
     <a id="paragraph*.44">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-146000">
       </a>
       ros2
service
list
      </span>
      Running
the <span id="textcolor2612"><code class="verb">ros2 service list</code></span>
      command
in
a
new
terminal
will
return
a
list
of
all
the
services
currently
active
in
the
system:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb178" style="padding:20px;border-radius: 3px;"><a id="x9-146002r469"></a>ros2<span id="textcolor2613"> </span>service<span id="textcolor2614"> </span>list</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-75">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb179" style="padding:20px;border-radius: 3px;"><a id="x9-146004r1"></a>/clear 
<a id="x9-146006r2"></a>/kill 
<a id="x9-146008r3"></a>/reset 
<a id="x9-146010r4"></a>/spawn 
<a id="x9-146012r5"></a>/teleop_turtle/describe_parameters 
<a id="x9-146014r6"></a>/teleop_turtle/get_parameter_types 
<a id="x9-146016r7"></a>/teleop_turtle/get_parameters 
<a id="x9-146018r8"></a>/teleop_turtle/list_parameters 
<a id="x9-146020r9"></a>/teleop_turtle/set_parameters 
<a id="x9-146022r10"></a>/teleop_turtle/set_parameters_atomically 
<a id="x9-146024r11"></a>/turtle1/set_pen 
<a id="x9-146026r12"></a>/turtle1/teleport_absolute 
<a id="x9-146028r13"></a>/turtle1/teleport_relative 
<a id="x9-146030r14"></a>/turtlesim/describe_parameters 
<a id="x9-146032r15"></a>/turtlesim/get_parameter_types 
<a id="x9-146034r16"></a>/turtlesim/get_parameters 
<a id="x9-146036r17"></a>/turtlesim/list_parameters 
<a id="x9-146038r18"></a>/turtlesim/set_parameters 
<a id="x9-146040r19"></a>/turtlesim/set_parameters_atomically</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      Looking
at
this
output
we
will
see
both
nodes
have
the
same
six
<alert style="color: #821131;">(6)</alert> services
with
parameters
in
their
names.
Nearly
every
node
in
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      has
these
infrastructure
services
that
parameters
are
built
off
of.
     </p>
     <p class="noindent">
      For
now,
let’s
focus
on
the
turtlesim-specific
services:
     </p>
     <ul class="itemize1">
      <li class="itemize">
       <p class="noindent"> <span id="textcolor2616"><code class="verb">/clear</code></span>,
       </p>
      </li>
      <li class="itemize">
       <p class="noindent"> <span id="textcolor2618"><code class="verb">/kill</code></span>
       </p>
      </li>
      <li class="itemize">
       <p class="noindent"> <span id="textcolor2620"><code class="verb">/reset</code></span>
       </p>
      </li>
      <li class="itemize">
       <p class="noindent"> <span id="textcolor2622"><code class="verb">/spawn</code></span>,
       </p>
      </li>
      <li class="itemize">
       <p class="noindent"> <span id="textcolor2624"><code class="verb">/turtle1/set_pen</code></span>,
       </p>
      </li>
      <li class="itemize">
       <p class="noindent"> <span id="textcolor2626"><code class="verb">/turtle1/teleport_absolute</code></span>,
and
       </p>
      </li>
      <li class="itemize">
       <p class="noindent"> <span id="textcolor2628"><code class="verb">/turtle1/teleport_relative</code></span>.
       </p>
      </li>
     </ul>
     <div class="knowledge">
      <p class="noindent">
       We
have
interacted
some
of
these
services
using <span id="textcolor2629"><code class="verb">rqt</code></span>
       previously.
      </p>
     </div>
     <a id="paragraph*.45">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-147000">
       </a>
       ros2
service
type
      </span>
      Services
have
types
which
describe
how
the
      <alert style="color: #821131;">
       request
      </alert>
      and
      <alert style="color: #821131;">
       response
      </alert>
      data
of
a
service
is
structured.
Service
types
are
defined
similarly
to
topic
types,
except
                                                                                
                                                                                
                                                                           
service
types
have
two
<alert style="color: #821131;">(2)</alert> parts:
     </p>
     <ul class="itemize1">
      <li class="itemize">
       <p class="noindent">
        one
message
for
request,
       </p>
      </li>
      <li class="itemize">
       <p class="noindent">
        another
one
for
response.
       </p>
      </li>
     </ul>
     <p class="noindent">
      To
find
out
the
type
of
a
service,
use
the
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb180" style="padding:20px;border-radius: 3px;"><a id="x9-147002r497"></a>ros2<span id="textcolor2632"> </span>service<span id="textcolor2633"> </span><span id="textcolor2634">type</span><span id="textcolor2635"> </span>&lt;service_name&gt;</div></pre>
     </div>
     <p class="noindent">
      Let’s
take
a
look
at
turtlesim’s <span id="textcolor2636"><code class="verb">/clear</code></span>
      service.
In
a
brand
new
terminal,
let’s
enter
the
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb181" style="padding:20px;border-radius: 3px;"><a id="x9-147004r502"></a>ros2<span id="textcolor2637"> </span>service<span id="textcolor2638"> </span><span id="textcolor2639">type</span><span id="textcolor2640"> </span>/clear</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-76">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb182" style="padding:20px;border-radius: 3px;"><a id="x9-147006r1"></a>std_srvs/srv/Empty</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      In
this
context,
the <span id="textcolor2641"><code class="verb">Empty</code></span>
      type
means
the
service
call
sends
no
data
when
making
a
request
and
receives
no
data
when
receiving
a
response.
      <a id="paragraph*.46">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-148000">
       </a>
       ros2
service
list
-t
      </span>
      To
see
the
types
of
all
the
active
services
at
the
same
time,
we
can
append
the <span id="textcolor2642"><code class="verb">--show-types</code></span>
      option,
abbreviated
as <span id="textcolor2643"><code class="verb">-t</code></span>,
to
the
list
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb183" style="padding:20px;border-radius: 3px;"><a id="x9-148002r512"></a>ros2<span id="textcolor2644"> </span>service<span id="textcolor2645"> </span>list<span id="textcolor2646"> </span>-t</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-77">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb184" style="padding:20px;border-radius: 3px;"><a id="x9-148004r1"></a>/clear [std_srvs/srv/Empty] 
<a id="x9-148006r2"></a>/kill [turtlesim/srv/Kill] 
<a id="x9-148008r3"></a>/reset [std_srvs/srv/Empty] 
<a id="x9-148010r4"></a>/spawn [turtlesim/srv/Spawn] 
<a id="x9-148012r5"></a>... 
<a id="x9-148014r6"></a>/turtle1/set_pen [turtlesim/srv/SetPen] 
<a id="x9-148016r7"></a>/turtle1/teleport_absolute [turtlesim/srv/TeleportAbsolute] 
<a id="x9-148018r8"></a>/turtle1/teleport_relative [turtlesim/srv/TeleportRelative] 
<a id="x9-148020r9"></a>...</div></pre>
       </div>
      </div>
     </div>
     <a id="paragraph*.47">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-149000">
       </a>
       ros2
service
find
      </span>
      If
we
want
to
find
all
the
services
of
a
specific
type,
we
can
use
the
command,
which
the
syntax
is
as
follows:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb185" style="padding:20px;border-radius: 3px;"><a id="x9-149002r530"></a>ros2<span id="textcolor2647"> </span>service<span id="textcolor2648"> </span>find<span id="textcolor2649"> </span>&lt;type_name&gt;</div></pre>
     </div>
     <p class="noindent">
      For
example,
we
can
find
all
the <span id="textcolor2650"><code class="verb">Empty</code></span>
      typed
services
like
this:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb186" style="padding:20px;border-radius: 3px;"><a id="x9-149004r535"></a>ros2<span id="textcolor2651"> </span>service<span id="textcolor2652"> </span>find<span id="textcolor2653"> </span>std_srvs/srv/Empty</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-78">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb187" style="padding:20px;border-radius: 3px;"><a id="x9-149006r1"></a>/clear 
<a id="x9-149008r2"></a>/reset</div></pre>
       </div>
      </div>
     </div>
     <a id="paragraph*.48">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-150000">
       </a>
       ros2
                                                                                
                                                                                
                                                                          
interface
show
      </span>
      We
can
call
services
from
the
command
line,
but
first
we
need
to
know
the
structure
of
the
input
arguments.
The
syntax
of
the
interface
command
is
as
follows:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb188" style="padding:20px;border-radius: 3px;"><a id="x9-150002r546"></a>ros2<span id="textcolor2654"> </span>interface<span id="textcolor2655"> </span>show<span id="textcolor2656"> </span>&lt;type_name&gt;</div></pre>
     </div>
     <p class="noindent">
      Try
this
on
the <span id="textcolor2657"><code class="verb">/clear</code></span>
      service’s
type, <span id="textcolor2658"><code class="verb">Empty</code></span>
      :
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb189" style="padding:20px;border-radius: 3px;"><a id="x9-150004r551"></a>ros2<span id="textcolor2659"> </span>interface<span id="textcolor2660"> </span>show<span id="textcolor2661"> </span>std_srvs/srv/Empty</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-79">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb190" style="padding:20px;border-radius: 3px;"><a id="x9-150006r1"></a>---</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      The <span id="textcolor2662"><code class="verb">---</code></span>
      separates
the
request
structure
(above)
from
the
response
structure
(below).
But,
                                                                                
                                                                                
                                                                              
as
we
learned
earlier,
the <span id="textcolor2663"><code class="verb">Empty</code></span>
      type
doesn’t
send
or
receive
any
data.
So,
naturally,
its
structure
is
blank.
     </p>
     <p class="noindent">
      Let’s
introspect
a
service
with
a
type
that
sends
and
receives
data,
like <span id="textcolor2664"><code class="verb">/spawn</code></span>.
From
the
results
of <span id="textcolor2665"><code class="verb">ros2 service list -t</code></span>,
we
know <span id="textcolor2666"><code class="verb">/spawn</code></span>
      ’s
type
is <span id="textcolor2667"><code class="verb">turtlesim/srv/Spawn</code></span>.
     </p>
     <p class="noindent">
      To
see
the
request
and
response
arguments
of
the <span id="textcolor2668"><code class="verb">/spawn</code></span>
      service,
run
the
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb191" style="padding:20px;border-radius: 3px;"><a id="x9-150008r561"></a>ros2<span id="textcolor2669"> </span>interface<span id="textcolor2670"> </span>show<span id="textcolor2671"> </span>turtlesim/srv/Spawn</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-80">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb192" style="padding:20px;border-radius: 3px;"><a id="x9-150010r1"></a>float32 x 
<a id="x9-150012r2"></a>float32 y 
<a id="x9-150014r3"></a>float32 theta 
<a id="x9-150016r4"></a>string name # Optional.  A unique name will be created and returned if this is empty 
<a id="x9-150018r5"></a>--- 
<a id="x9-150020r6"></a>string name</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      The
information
above
the <span id="textcolor2672"><code class="verb">---</code></span>
      line
tells
us
the
arguments
needed
to
call <span id="textcolor2673"><code class="verb">/spawn</code></span>. <span id="textcolor2674"><code class="verb">x</code></span>, <span id="textcolor2675"><code class="verb">y</code></span>
      and <span id="textcolor2676"><code class="verb">theta</code></span>
      determine
the
2D
pose
of
the
spawned
turtle,
and
name
is
clearly
optional.
     </p>
     <p class="noindent">
      The
information
below
the
line
isn’t
something
we
need
to
know
in
this
case,
but
it
can
help
us
understand
the
data
type
of
the
response
we
get
from
the
call.
      <a id="paragraph*.49">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-151000">
       </a>
       ros2
service
call
      </span>
      Now
that
we
know
what
a
service
type
is,
how
to
find
a
service’s
type,
and
how
to
find
the
structure
of
that
type’s
arguments,
we
can
call
a
service
using:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb193" style="padding:20px;border-radius: 3px;"><a id="x9-151002r576"></a>ros2<span id="textcolor2677"> </span>service<span id="textcolor2678"> </span>call<span id="textcolor2679"> </span>&lt;service_name&gt;<span id="textcolor2680"> </span>&lt;service_type&gt;<span id="textcolor2681"> </span>&lt;arguments&gt;</div></pre>
     </div>
     <p class="noindent">
      The
&lt;arguments&gt;
part
is
optional.
For
example,
we
know
that
Empty
typed
services
don’t
have
any
arguments:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb194" style="padding:20px;border-radius: 3px;"><a id="x9-151004r581"></a>ros2<span id="textcolor2682"> </span>service<span id="textcolor2683"> </span>call<span id="textcolor2684"> </span>/clear<span id="textcolor2685"> </span>std_srvs/srv/Empty</div></pre>
     </div>
     <p class="noindent">
      This
command
will
clear
the
                                                                                
                                                                                
                                                                          
turtlesim
window
of
any
lines
our
turtle
has
drawn.
Now
let’s
spawn
a
new
turtle
by
calling
/spawn
and
setting
arguments.
Input
&lt;arguments&gt;
in
a
service
call
from
the
command-line
need
to
be
in
YAML
syntax.
     </p>
     <p class="noindent">
      Enter
the
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb195" style="padding:20px;border-radius: 3px;"><a id="x9-151006r586"></a>ros2<span id="textcolor2686"> </span>service<span id="textcolor2687"> </span>call<span id="textcolor2688"> </span>/spawn<span id="textcolor2689"> </span>turtlesim/srv/Spawn<span id="textcolor2690"> </span><span id="textcolor2691">"{x: 2, y: 2, theta: 0.2, name: ''}"</span></div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-81">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb196" style="padding:20px;border-radius: 3px;"><a id="x9-151008r1"></a>requester: making request: turtlesim.srv.Spawn_Request(x=2.0, y=2.0, theta=0.2, name='') 
<a id="x9-151010r2"></a> 
<a id="x9-151012r3"></a>response: 
<a id="x9-151014r4"></a>turtlesim.srv.Spawn_Response(name='turtle2')</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      We
will
get
this
method-style
view
of
what’s
happening,
and
then
the
service
response.
     </p>
     <p class="noindent">
      Our
turtlesim
window
                                                                                
                                                                                
                                                                             
will
update
with
the
newly
spawned
turtle
right
away:
     </p>
     <p class="noindent">
     </p>
    </div>
    <div class="section-head" id="section-6" sec="section-6">
     <h2 class="sectionHead">
      <a aria-label="Link to this section in PDF version" class="pdf-link" href="MobileRoboticsLectureBook.pdf#section.7.6" style="color: red;  position: absolute;  left: -30px;" target="_blank">
       <svg class="bi bi-file-pdf" fill="currentColor" height="20" viewbox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
        </path>
        <path d="M4.603 12.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.701 19.701 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.187-.012.395-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.065.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.716 5.716 0 0 1-.911-.95 11.642 11.642 0 0 0-1.997.406 11.311 11.311 0 0 1-1.021 1.51c-.29.35-.608.655-.926.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.27.27 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.647 12.647 0 0 1 1.01-.193 11.666 11.666 0 0 1-.51-.858 20.741 20.741 0 0 1-.5 1.05zm2.446.45c.15.162.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.881 3.881 0 0 0-.612-.053zM8.078 5.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z">
        </path>
       </svg>
      </a>
      <small class="titlemark">
       7.6
      </small>
      <a id="x9-1520007.6">
      </a>
      Working
with
Parameters
     </h2>
     <p class="noindent">
      To
give
a
brief
refreshment,
a
parameter
is
a
      <alert style="color: #821131;">
       configuration
value
      </alert>
      of
a
node.
Think
of
parameters
as
node
settings
or
its
configuration
file.
A
node
can
store
parameters
as
integers,
floats,
booleans,
strings,
and
lists.
     </p>
     <div class="knowledge">
      <p class="noindent">
       In
       <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
        ROS
       </a>,
each
node
maintains
its
own
parameters.
      </p>
     </div>
     <p class="noindent">
      To
begin
we
start
with
a
fresh
new
terminal
                                                                                
                                                                                
                                                                            
(
      <kbd>
       Ctrl
      </kbd>
      +
      <kbd>
       Alt
      </kbd>
      +
      <kbd>
       T
      </kbd>
      )
and
type
the
following
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb197" style="padding:20px;border-radius: 3px;"><a id="x9-152002r601"></a>ros2<span id="textcolor2692"> </span>run<span id="textcolor2693"> </span>turtlesim<span id="textcolor2694"> </span>turtlesim_node</div></pre>
     </div>
     <p class="noindent">
      And
of
course
we
would
like
to
control
this
turtle
so
we
need
to
add
the <span id="textcolor2695"><code class="verb">teleop</code></span>
      node
as
well.
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb198" style="padding:20px;border-radius: 3px;"><a id="x9-152004r606"></a>ros2<span id="textcolor2696"> </span>run<span id="textcolor2697"> </span>turtlesim<span id="textcolor2698"> </span>turtle_teleop_key</div></pre>
     </div>
     <a id="paragraph*.50">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-153000">
       </a>
       ros2
param
list
      </span>
      Now
that
both
of
them
are
running
      <alert style="color: #821131;">
       at
the
same
time
      </alert>
      ,
lets
look
at
all
the
parameters
in
this
system
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb199" style="padding:20px;border-radius: 3px;"><a id="x9-153002r611"></a>ros2<span id="textcolor2699"> </span>run<span id="textcolor2700"> </span>turtlesim<span id="textcolor2701"> </span>turtle_teleop_key</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-82">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb200" style="padding:20px;border-radius: 3px;"><a id="x9-153004r1"></a>/teleop_turtle: 
<a id="x9-153006r2"></a>  qos_overrides./parameter_events.publisher.depth 
<a id="x9-153008r3"></a>  qos_overrides./parameter_events.publisher.durability 
<a id="x9-153010r4"></a>  qos_overrides./parameter_events.publisher.history 
<a id="x9-153012r5"></a>  qos_overrides./parameter_events.publisher.reliability 
<a id="x9-153014r6"></a>  scale_angular 
<a id="x9-153016r7"></a>  scale_linear 
<a id="x9-153018r8"></a>  use_sim_time 
<a id="x9-153020r9"></a>/turtlesim: 
<a id="x9-153022r10"></a>  background_b 
<a id="x9-153024r11"></a>  background_g 
<a id="x9-153026r12"></a>  background_r 
<a id="x9-153028r13"></a>  qos_overrides./parameter_events.publisher.depth 
<a id="x9-153030r14"></a>  qos_overrides./parameter_events.publisher.durability 
<a id="x9-153032r15"></a>  qos_overrides./parameter_events.publisher.history 
<a id="x9-153034r16"></a>  qos_overrides./parameter_events.publisher.reliability 
<a id="x9-153036r17"></a>  use_sim_time</div></pre>
       </div>
      </div>
     </div>
     <div class="warning">
      <p class="noindent">
       Every
node
has
the
parameter <span id="textcolor2702"><code class="verb">use_sim_time</code></span>.
It
is
       <span id="bold" style="font-weight:bold;">
        NOT
       </span>
       unique
to <span id="textcolor2703"><code class="verb">turtlesim</code></span>.
      </p>
     </div>
     <p class="noindent">
      Based
on
their
names,
it
looks
like <span id="textcolor2704"><code class="verb">/turtlesim</code></span>
      parameters
determine
the
background
color
of
the
turtlesim
window
using
RGB
color
values.
      <a id="paragraph*.51">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-154000">
       </a>
       ros2
param
get
      </span>
      To
determine
a
type
of
the
parameter
we
are
trying
to
understand
let’s
use <span id="textcolor2705"><code class="verb">ros2 param get</code></span>.
The
following
is
the
syntax
of
the
command
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb201" style="padding:20px;border-radius: 3px;"><a id="x9-154002r637"></a>ros2<span id="textcolor2706"> </span>param<span id="textcolor2707"> </span>get<span id="textcolor2708"> </span>&lt;node_name&gt;<span id="textcolor2709"> </span>&lt;parameter_name&gt;</div></pre>
     </div>
     <p class="noindent">
      Now,
let’s
use
this
command
to
determine
they
type
and
the
value
of
the
parameter:
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-83">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb202" style="padding:20px;border-radius: 3px;"><a id="x9-154004r1"></a>Integer value is: 86</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      It
seems
the <span id="textcolor2710"><code class="verb">background_g</code></span>
      parameter
holds
an
integer
value.
If
we
were
to
run
the
same
command
on <span id="textcolor2711"><code class="verb">background_r</code></span>
      and <span id="textcolor2712"><code class="verb">background_b</code></span>,
we
will
get
the
values
69
and
255
,
respectively.
      <a id="paragraph*.52">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-155000">
       </a>
       ros2
param
set
      </span>
      Time
to
change
these
parameters
and
play
around.
To
change
a
parameter’s
value
at
runtime,
use
the
command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb203" style="padding:20px;border-radius: 3px;"><a id="x9-155002r652"></a>ros2<span id="textcolor2713"> </span>param<span id="textcolor2714"> </span><span id="textcolor2715">set</span><span id="textcolor2716"> </span>&lt;node_name&gt;<span id="textcolor2717"> </span>&lt;parameter_name&gt;<span id="textcolor2718"> </span>&lt;value&gt;</div></pre>
     </div>
     <p class="noindent">
      Let’s
do
something
simple
and
try
to
change
the <span id="textcolor2719"><code class="verb">/turtlesim</code></span>
      node’s
background:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb204" style="padding:20px;border-radius: 3px;"><a id="x9-155004r657"></a>ros2<span id="textcolor2720"> </span>param<span id="textcolor2721"> </span><span id="textcolor2722">set</span><span id="textcolor2723"> </span>/turtlesim<span id="textcolor2724"> </span>background_r<span id="textcolor2725"> </span><span id="textcolor2726">150</span></div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-84">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb205" style="padding:20px;border-radius: 3px;"><a id="x9-155006r1"></a>Set parameter successful</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      The
background
of
our
turtlesim
window
should
change
colours.
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         11
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <img alt="PIC" height="" src="figures/Command-Line-Tools/raster/ros-param-purple-bg.png" width="100%"/>
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          11
         </sup>
        </span>
       </alert>
       <span id="textcolor2727">
        While
the
original
value
was
86
                                                                                
                                                                                
by
using <span id="textcolor2728"><code class="verb">ros param set</code></span>
        we
were
able
to
change
the
value
of
the
parameter
and
change
the
background
to
a
nice
purple.
       </span>
      </span>
      It
is
worth
mentioning
that,
setting
parameters
with
the
set
command
will
only
change
them
in
our
      <alert style="color: #821131;">
       current
      </alert>
      session,
      <span id="bold" style="font-weight:bold;">
       NOT
      </span>
      permanently.
However,
we
can
save
our
settings
and
reload
them
the
next
time
we
want
to
start
a
node.
      <a id="paragraph*.53">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-156000">
       </a>
       ros2  param  dump
      </span>
      For this we need to dump this parameters to some other file for later use. Let’s have a look at
the <span id="textcolor2729"><code class="verb">ros2 param dump</code></span>
      command. This allows us to view all of a node’s current parameter values:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb206" style="padding:20px;border-radius: 3px;"><a id="x9-156002r667"></a>ros2<span id="textcolor2730"> </span>param<span id="textcolor2731"> </span>dump<span id="textcolor2732"> </span>&lt;node_name&gt;</div></pre>
     </div>
     <p class="noindent">
      The command prints to the standard output <span id="textcolor2733">(<code class="verb">stdout</code>)</span> by default but we can also redirect the parameter values into a file to save them for later.
     </p>
     <p class="noindent">
      To save our current configuration of <span id="textcolor2734"><code class="verb">/turtlesim</code></span>
      parameters into the file <span id="textcolor2735"><code class="verb">turtlesim.yaml</code></span>, enter the command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb207" style="padding:20px;border-radius: 3px;"><a id="x9-156004r672"></a>ros2<span id="textcolor2736"> </span>param<span id="textcolor2737"> </span>dump<span id="textcolor2738"> </span>/turtlesim<span id="textcolor2739"> </span>&gt;<span id="textcolor2740"> </span>turtlesim.yaml</div></pre>
     </div>
     <p class="noindent">
      In the current working directory we will find a new file. If we were to open this file, we’ll see the following content:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       yaml
      </div>
      <pre><div class="language-yaml" id="fancyvrb208" style="padding:20px;border-radius: 3px;"><a id="x9-156006r677"></a><span id="textcolor2741">/turtlesim:</span> 
<a id="x9-156008r678"></a><span id="textcolor2742"> </span><span id="textcolor2743">ros__parameters:</span> 
<a id="x9-156010r679"></a><span id="textcolor2744">   </span><span id="textcolor2745">background_b:</span><span id="textcolor2746"> </span><span id="textcolor2747">255</span> 
<a id="x9-156012r680"></a><span id="textcolor2748">   </span><span id="textcolor2749">background_g:</span><span id="textcolor2750"> </span><span id="textcolor2751">86</span> 
<a id="x9-156014r681"></a><span id="textcolor2752">   </span><span id="textcolor2753">background_r:</span><span id="textcolor2754"> </span><span id="textcolor2755">150</span> 
<a id="x9-156016r682"></a><span id="textcolor2756">   </span><span id="textcolor2757">qos_overrides:</span> 
<a id="x9-156018r683"></a><span id="textcolor2758">    </span><span id="textcolor2759">/parameter_events:</span> 
<a id="x9-156020r684"></a><span id="textcolor2760">      </span><span id="textcolor2761">publisher:</span> 
<a id="x9-156022r685"></a><span id="textcolor2762">       </span><span id="textcolor2763">depth:</span><span id="textcolor2764"> </span><span id="textcolor2765">1000</span> 
<a id="x9-156024r686"></a><span id="textcolor2766">       </span><span id="textcolor2767">durability:</span><span id="textcolor2768"> </span><span id="textcolor2769">volatile</span> 
<a id="x9-156026r687"></a><span id="textcolor2770">       </span><span id="textcolor2771">history:</span><span id="textcolor2772"> </span><span id="textcolor2773">keep_last</span> 
<a id="x9-156028r688"></a><span id="textcolor2774">       </span><span id="textcolor2775">reliability:</span><span id="textcolor2776"> </span><span id="textcolor2777">reliable</span> 
<a id="x9-156030r689"></a><span id="textcolor2778">   </span><span id="textcolor2779">use_sim_time:</span><span id="textcolor2780"> </span><span id="textcolor2781">false</span></div></pre>
     </div>
     <p class="noindent">
      Dumping parameters comes in handy if we want to reload the node with the same parameters in the future.
      <a id="paragraph*.54">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-157000">
       </a>
       ros2  param  load
      </span>
      Once the parameters are dumped into a file, we can load them to a currently running node using the command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb209" style="padding:20px;border-radius: 3px;"><a id="x9-157002r694"></a>ros2<span id="textcolor2782"> </span>param<span id="textcolor2783"> </span>load<span id="textcolor2784"> </span>&lt;node_name&gt;<span id="textcolor2785"> </span>&lt;parameter_file&gt;</div></pre>
     </div>
     <p class="noindent">
      To load the <span id="textcolor2786"><code class="verb">turtlesim.yaml</code></span>
      file we just generated with <span id="textcolor2787"><code class="verb">ros2 param dump</code></span>
      into <span id="textcolor2788"><code class="verb">/turtlesim</code></span>
      node parameters, we just have to enter the command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb210" style="padding:20px;border-radius: 3px;"><a id="x9-157004r699"></a>ros2<span id="textcolor2789"> </span>param<span id="textcolor2790"> </span>load<span id="textcolor2791"> </span>/turtlesim<span id="textcolor2792"> </span>turtlesim.yaml</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-85">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb211" style="padding:20px;border-radius: 3px;"><a id="x9-157006r1"></a>Set parameter background_b successful 
<a id="x9-157008r2"></a>Set parameter background_g successful 
<a id="x9-157010r3"></a>Set parameter background_r successful 
<a id="x9-157012r4"></a>Set parameter qos_overrides./parameter_events.publisher.depth failed: parameter 'qos_overrides./parameter_events.publisher.depth' cannot be set because it is read-only 
<a id="x9-157014r5"></a>Set parameter qos_overrides./parameter_events.publisher.durability failed: parameter 'qos_overrides./parameter_events.publisher.durability' cannot be set because it is read-only 
<a id="x9-157016r6"></a>Set parameter qos_overrides./parameter_events.publisher.history failed: parameter 'qos_overrides./parameter_events.publisher.history' cannot be set because it is read-only 
<a id="x9-157018r7"></a>Set parameter qos_overrides./parameter_events.publisher.reliability failed: parameter 'qos_overrides./parameter_events.publisher.reliability' cannot be set because it is read-only 
<a id="x9-157020r8"></a>Set parameter use_sim_time successful</div></pre>
       </div>
      </div>
     </div>
     <div class="warning">
      <p class="noindent">
       Read-only parameters can only be modified at startup and not afterwards, that is why there are some warnings for the <span id="textcolor2793"><code class="verb">qos_overrides</code></span>
       parameters.
      </p>
     </div>
     <a id="paragraph*.55">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-158000">
       </a>
       Loading  Parameters  on  Startup
      </span>
      To start the same node using our saved parameter values, use:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb212" style="padding:20px;border-radius: 3px;"><a id="x9-158002r716"></a>ros2<span id="textcolor2794"> </span>run<span id="textcolor2795"> </span>&lt;package_name&gt;<span id="textcolor2796"> </span>&lt;executable_name&gt;<span id="textcolor2797"> </span>--ros-args<span id="textcolor2798"> </span>--params-file<span id="textcolor2799"> </span>&lt;file_name&gt;</div></pre>
     </div>
     <p class="noindent">
      This is the same command we always use to start turtlesim, with the added flags <span id="textcolor2800"><code class="verb">--ros-args</code></span>
      and <span id="textcolor2801"><code class="verb">--params-file</code></span>, followed by the file we want to load.
     </p>
     <p class="noindent">
      To test this out, stop our running turtlesim node, and try reloading it with our saved parameters, using:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb213" style="padding:20px;border-radius: 3px;"><a id="x9-158004r721"></a>ros2<span id="textcolor2802"> </span>run<span id="textcolor2803"> </span>turtlesim<span id="textcolor2804"> </span>turtlesim_node<span id="textcolor2805"> </span>--ros-args<span id="textcolor2806"> </span>--params-file<span id="textcolor2807"> </span>turtlesim.yaml</div></pre>
     </div>
     <p class="noindent">
      The turtlesim window should appear as usual, but with the purple background we set earlier.
     </p>
     <div class="warning">
      <p class="noindent">
       When a parameter file is used at node startup, all parameters, including the read-only ones, will be updated.
      </p>
     </div>
     <p class="noindent">
     </p>
    </div>
    <div class="section-head" id="section-7" sec="section-7">
     <h2 class="sectionHead">
      <a aria-label="Link to this section in PDF version" class="pdf-link" href="MobileRoboticsLectureBook.pdf#section.7.7" style="color: red;  position: absolute;  left: -30px;" target="_blank">
       <svg class="bi bi-file-pdf" fill="currentColor" height="20" viewbox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
        </path>
        <path d="M4.603 12.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.701 19.701 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.187-.012.395-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.065.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.716 5.716 0 0 1-.911-.95 11.642 11.642 0 0 0-1.997.406 11.311 11.311 0 0 1-1.021 1.51c-.29.35-.608.655-.926.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.27.27 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.647 12.647 0 0 1 1.01-.193 11.666 11.666 0 0 1-.51-.858 20.741 20.741 0 0 1-.5 1.05zm2.446.45c.15.162.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.881 3.881 0 0 0-.612-.053zM8.078 5.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z">
        </path>
       </svg>
      </a>
      <small class="titlemark">
       7.7
      </small>
      <a id="x9-1590007.7">
      </a>
      A  Practical  Look  into  Actions
     </h2>
     <p class="noindent">
      Actions are one of the communication types in
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      and are intended for long running tasks. They consist of three parts: a goal, feedback, and a result.
     </p>
     <p class="noindent">
      Actions are built on topics and services. Their functionality is similar to services, except actions can
be canceled. They also provide steady feedback, as opposed to services which return a single response.
     </p>
     <p class="noindent">
      Actions use a client-server model, similar to the publisher-subscriber model (described in the topics tutorial). An “action client”
node sends a goal to an “action server” node that acknowledges the goal and returns a stream of feedback and a result.
     </p>
     <p class="noindent">
      To begin we start with a fresh new terminal (
      <kbd>
       Ctrl
      </kbd>
      +
      <kbd>
       Alt
      </kbd>
      +
      <kbd>
       T
      </kbd>
      ) and type the following command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb214" style="padding:20px;border-radius: 3px;"><a id="x9-159002r601"></a>ros2<span id="textcolor2808"> </span>run<span id="textcolor2809"> </span>turtlesim<span id="textcolor2810"> </span>turtlesim_node</div></pre>
     </div>
     <p class="noindent">
      And of course we would like to control this turtle so we need to add the <span id="textcolor2811"><code class="verb">teleop</code></span>
      node as well.
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb215" style="padding:20px;border-radius: 3px;"><a id="x9-159004r606"></a>ros2<span id="textcolor2812"> </span>run<span id="textcolor2813"> </span>turtlesim<span id="textcolor2814"> </span>turtle_teleop_key</div></pre>
     </div>
     <p class="noindent">
      When we launch the <span id="textcolor2815"><code class="verb">/teleop_turtle</code></span>
      node, we will see the following message in our terminal:
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-86">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb216" style="padding:20px;border-radius: 3px;"><a id="x9-159006r1"></a>Use arrow keys to move the turtle. 
<a id="x9-159008r2"></a>Use G|B|V|C|D|E|R|T keys to rotate to absolute orientations. 'F' to cancel a rotation.</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      Let’s focus on the second line, which corresponds to an action. Pay attention to the terminal where the <span id="textcolor2816"><code class="verb">/turtlesim</code></span>
      node is running. Each
time we press one of these keys, we are sending a goal to an action server that is part of the <span id="textcolor2817"><code class="verb">/turtlesim</code></span>
      node. The goal is to rotate the
turtle to face a particular direction. A message relaying the result of the goal should display once the turtle completes its rotation:
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-87">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb217" style="padding:20px;border-radius: 3px;"><a id="x9-159010r1"></a>[INFO] [turtlesim]: Rotation goal completed successfully</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      The  F  key  will  cancel  a  goal  mid-execution.
     </p>
     <p class="noindent">
      Try pressing the C key, and then pressing the F key before the turtle can complete its
rotation. In the terminal where the /turtlesim node is running, we will see the message:
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-88">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb218" style="padding:20px;border-radius: 3px;"><a id="x9-159012r1"></a>[INFO] [turtlesim]: Rotation goal canceled</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      Not only can the client-side (our input in the teleop) stop a goal, but the server-side (the /turtlesim
node) can as well. When the server-side chooses to stop processing a goal, it is said to “abort” the goal.
     </p>
     <p class="noindent">
      Try hitting the D key, then the G key before the first rotation can complete. In the terminal where the /turtlesim node is running, we will see the message:
     </p>
     <div class="tcolorbox tcolorbox" id="tcolobox-89">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb219" style="padding:20px;border-radius: 3px;"><a id="x9-159014r1"></a>[WARN] [turtlesim]: Rotation goal received before a previous goal finished. 
<a id="x9-159016r2"></a>                    Aborting previous goal</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      This action server chose to abort the first goal because it got a new one. It could have chosen something else, like reject the new goal or execute
the second goal after the first one finished. Don’t assume every action server will choose to abort the current goal when it gets a new one.
      <a id="paragraph*.56">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-160000">
       </a>
       ros2  node  info
      </span>
      To see the list of actions a node provides, <span id="textcolor2818"><code class="verb">/turtlesim</code></span>
      in this case, open a new terminal and run the command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb220" style="padding:20px;border-radius: 3px;"><a id="x9-160002r753"></a>ros2<span id="textcolor2819"> </span>node<span id="textcolor2820"> </span>info<span id="textcolor2821"> </span>/turtlesim</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-90">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb221" style="padding:20px;border-radius: 3px;"><a id="x9-160004r1"></a>/turtlesim 
<a id="x9-160006r2"></a>  Subscribers: 
<a id="x9-160008r3"></a>    /parameter_events: rcl_interfaces/msg/ParameterEvent 
<a id="x9-160010r4"></a>    /turtle1/cmd_vel: geometry_msgs/msg/Twist 
<a id="x9-160012r5"></a>  Publishers: 
<a id="x9-160014r6"></a>    /parameter_events: rcl_interfaces/msg/ParameterEvent 
<a id="x9-160016r7"></a>    /rosout: rcl_interfaces/msg/Log 
<a id="x9-160018r8"></a>    /turtle1/color_sensor: turtlesim/msg/Color 
<a id="x9-160020r9"></a>    /turtle1/pose: turtlesim/msg/Pose 
<a id="x9-160022r10"></a>  Service Servers: 
<a id="x9-160024r11"></a>    /clear: std_srvs/srv/Empty 
<a id="x9-160026r12"></a>    /kill: turtlesim/srv/Kill 
<a id="x9-160028r13"></a>    /reset: std_srvs/srv/Empty 
<a id="x9-160030r14"></a>    /spawn: turtlesim/srv/Spawn 
<a id="x9-160032r15"></a>    /turtle1/set_pen: turtlesim/srv/SetPen 
<a id="x9-160034r16"></a>    /turtle1/teleport_absolute: turtlesim/srv/TeleportAbsolute 
<a id="x9-160036r17"></a>    /turtle1/teleport_relative: turtlesim/srv/TeleportRelative 
<a id="x9-160038r18"></a>    /turtlesim/describe_parameters: rcl_interfaces/srv/DescribeParameters 
<a id="x9-160040r19"></a>    /turtlesim/get_parameter_types: rcl_interfaces/srv/GetParameterTypes 
<a id="x9-160042r20"></a>    /turtlesim/get_parameters: rcl_interfaces/srv/GetParameters 
<a id="x9-160044r21"></a>    /turtlesim/list_parameters: rcl_interfaces/srv/ListParameters 
<a id="x9-160046r22"></a>    /turtlesim/set_parameters: rcl_interfaces/srv/SetParameters 
<a id="x9-160048r23"></a>    /turtlesim/set_parameters_atomically: rcl_interfaces/srv/SetParametersAtomically 
<a id="x9-160050r24"></a>  Service Clients: 
<a id="x9-160052r25"></a> 
<a id="x9-160054r26"></a>  Action Servers: 
<a id="x9-160056r27"></a>    /turtle1/rotate_absolute: turtlesim/action/RotateAbsolute 
<a id="x9-160058r28"></a>  Action Clients:</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      The command returns a list of /turtlesim’s subscribers, publishers, services, action servers and action clients.
     </p>
     <p class="noindent">
      Notice that the <span id="textcolor2822"><code class="verb">/turtle1/rotate_absolute</code></span>
      action for <span id="textcolor2823"><code class="verb">/turtlesim</code></span>
      is under Action Servers. This
means /turtlesim responds to and provides feedback for the <span id="textcolor2824"><code class="verb">/turtle1/rotate_absolute</code></span>
      action.
     </p>
     <p class="noindent">
      The <span id="textcolor2825"><code class="verb">/teleop_turtle</code></span>
      node has the name <span id="textcolor2826"><code class="verb">/turtle1/rotate_absolute</code></span>
      under Action Clients meaning that it sends goals for that action name. To see that, run:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb222" style="padding:20px;border-radius: 3px;"><a id="x9-160060r790"></a>ros2<span id="textcolor2827"> </span>node<span id="textcolor2828"> </span>info<span id="textcolor2829"> </span>/teleop_turtle</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-91">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb223" style="padding:20px;border-radius: 3px;"><a id="x9-160062r1"></a>/teleop_turtle 
<a id="x9-160064r2"></a>  Subscribers: 
<a id="x9-160066r3"></a>    /parameter_events: rcl_interfaces/msg/ParameterEvent 
<a id="x9-160068r4"></a>  Publishers: 
<a id="x9-160070r5"></a>    /parameter_events: rcl_interfaces/msg/ParameterEvent 
<a id="x9-160072r6"></a>    /rosout: rcl_interfaces/msg/Log 
<a id="x9-160074r7"></a>    /turtle1/cmd_vel: geometry_msgs/msg/Twist 
<a id="x9-160076r8"></a>  Service Servers: 
<a id="x9-160078r9"></a>    /teleop_turtle/describe_parameters: rcl_interfaces/srv/DescribeParameters 
<a id="x9-160080r10"></a>    /teleop_turtle/get_parameter_types: rcl_interfaces/srv/GetParameterTypes 
<a id="x9-160082r11"></a>    /teleop_turtle/get_parameters: rcl_interfaces/srv/GetParameters 
<a id="x9-160084r12"></a>    /teleop_turtle/list_parameters: rcl_interfaces/srv/ListParameters 
<a id="x9-160086r13"></a>    /teleop_turtle/set_parameters: rcl_interfaces/srv/SetParameters 
<a id="x9-160088r14"></a>    /teleop_turtle/set_parameters_atomically: rcl_interfaces/srv/SetParametersAtomically 
<a id="x9-160090r15"></a>  Service Clients: 
<a id="x9-160092r16"></a> 
<a id="x9-160094r17"></a>  Action Servers: 
<a id="x9-160096r18"></a> 
<a id="x9-160098r19"></a>  Action Clients: 
<a id="x9-160100r20"></a>    /turtle1/rotate_absolute: turtlesim/action/RotateAbsolute</div></pre>
       </div>
      </div>
     </div>
     <a id="paragraph*.57">
     </a>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-161000">
       </a>
       ros2  action  list
      </span>
      To identify all the actions in the ROS graph, run the command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb224" style="padding:20px;border-radius: 3px;"><a id="x9-161002r821"></a>ros2<span id="textcolor2830"> </span>action<span id="textcolor2831"> </span>list</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-92">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb225" style="padding:20px;border-radius: 3px;"><a id="x9-161004r1"></a>/turtle1/rotate_absolute</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      This is the only action in the ROS graph right now. It controls the turtle’s rotation, as we saw
earlier. We also already know that there is one action client (part of <span id="textcolor2832"><code class="verb">/teleop_turtle</code></span>
      ) and one action
server (part of <span id="textcolor2833"><code class="verb">/turtlesim</code></span>
      ) for this action from using the ros2 node info <span id="textcolor2834"><code class="verb">&lt;node_name&gt;</code></span>
      command.
      <a id="paragraph*.58">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-162000">
       </a>
       ros2  action  list  -t
      </span>
      Actions have types, similar to topics and services. To find <span id="textcolor2835"><code class="verb">/turtle1/rotate_absolute</code></span>
      ’s type, run the command:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb226" style="padding:20px;border-radius: 3px;"><a id="x9-162002r833"></a>ros2<span id="textcolor2836"> </span>action<span id="textcolor2837"> </span>list<span id="textcolor2838"> </span>-t</div></pre>
     </div>
     <div class="tcolorbox tcolorbox" id="tcolobox-93">
      <div class="tcolorbox-content">
       <div class="code-block">
        <div class="code-lang">
         text
        </div>
        <pre><div class="language-text" id="fancyvrb227" style="padding:20px;border-radius: 3px;"><a id="x9-162004r1"></a>/turtle1/rotate_absolute [turtlesim/action/RotateAbsolute]</div></pre>
       </div>
      </div>
     </div>
     <p class="noindent">
      In brackets to the right of each action name (in this case only <span id="textcolor2839"><code class="verb">/turtle1/rotate_absolute</code></span>
      ) is the action type,
turtlesim/action/RotateAbsolute. We will need this when we want to execute an action from the command line or from code.
     </p>
     <p class="noindent">
     </p>
    </div>
    <div class="section-head" id="section-8" sec="section-8">
     <h2 class="sectionHead">
      <a aria-label="Link to this section in PDF version" class="pdf-link" href="MobileRoboticsLectureBook.pdf#section.7.8" style="color: red;  position: absolute;  left: -30px;" target="_blank">
       <svg class="bi bi-file-pdf" fill="currentColor" height="20" viewbox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
        </path>
        <path d="M4.603 12.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.701 19.701 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.187-.012.395-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.065.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.716 5.716 0 0 1-.911-.95 11.642 11.642 0 0 0-1.997.406 11.311 11.311 0 0 1-1.021 1.51c-.29.35-.608.655-.926.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.27.27 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.647 12.647 0 0 1 1.01-.193 11.666 11.666 0 0 1-.51-.858 20.741 20.741 0 0 1-.5 1.05zm2.446.45c.15.162.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.881 3.881 0 0 0-.612-.053zM8.078 5.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z">
        </path>
       </svg>
      </a>
      <small class="titlemark">
       7.8
      </small>
      <a id="x9-1630007.8">
      </a>
      Launching  Nodes
     </h2>
     <p class="noindent">
      Up to now, we have been opening new terminals for every new node we ran. As we create more complex systems with more
and more nodes running simultaneously, opening terminals and reentering configuration details becomes tedious.
     </p>
     <p class="noindent">
      Launch files allow we to start up and configure a number of executables containing
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      nodes simultaneously.
     </p>
     <p class="noindent">
      Running
a
single
launch
file
with
the
ros2
launch
command
will
start
up
our
entire
system
      <alert style="color: #821131;">
       <span id="bold" style="font-weight:bold;">
        <sup class="textsuperscript">
         12
        </sup>
       </span>
      </alert>
      <span class="marginnote">
       <alert style="color: #821131;">
        <span id="bold" style="font-weight:bold;">
         <sup class="textsuperscript">
          12
         </sup>
        </span>
       </alert>
       <span id="textcolor2840">
        which
includes
all
nodes
and
their
configurations
       </span>
      </span>
      at
once.
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb228" style="padding:20px;border-radius: 3px;"><a id="x9-163002r912"></a>ros2<span id="textcolor2841"> </span>launch<span id="textcolor2842"> </span>turtlesim<span id="textcolor2843"> </span>multisim.launch.py</div></pre>
     </div>
     <p class="noindent">
      This
command
will
run
the
following
launch
file:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       python
      </div>
      <pre><div class="language-python" id="fancyvrb229" style="padding:20px;border-radius: 3px;"><a id="x9-163004r917"></a><span id="textcolor2844">from</span><span id="textcolor2845"> </span><span id="textcolor2846">launch</span><span id="textcolor2847"> </span><span id="textcolor2848">import</span> <span id="textcolor2849">LaunchDescription</span> 
<a id="x9-163006r918"></a><span id="textcolor2850">import</span><span id="textcolor2851"> </span><span id="textcolor2852">launch_ros</span><span id="textcolor2853">.</span><span id="textcolor2854">actions</span> 
<a id="x9-163008r919"></a> 
<a id="x9-163010r920"></a> 
<a id="x9-163012r921"></a><span id="textcolor2855">def</span><span id="textcolor2856"> </span><span id="textcolor2857">generate_launch_description</span><span id="textcolor2858">(</span><span id="textcolor2859">)</span><span id="textcolor2860">:</span> 
<a id="x9-163014r922"></a>   <span id="textcolor2861">return</span> <span id="textcolor2862">LaunchDescription</span><span id="textcolor2863">(</span><span id="textcolor2864">[</span> 
<a id="x9-163016r923"></a>      <span id="textcolor2865">launch_ros</span><span id="textcolor2866">.</span><span id="textcolor2867">actions</span><span id="textcolor2868">.</span><span id="textcolor2869">Node</span><span id="textcolor2870">(</span> 
<a id="x9-163018r924"></a>         <span id="textcolor2871">namespace</span><span id="textcolor2872">=</span><span id="textcolor2873">'</span><span id="textcolor2874">turtlesim1</span><span id="textcolor2875">'</span><span id="textcolor2876">,</span> <span id="textcolor2877">package</span><span id="textcolor2878">=</span><span id="textcolor2879">'</span><span id="textcolor2880">turtlesim</span><span id="textcolor2881">'</span><span id="textcolor2882">,</span> 
<a id="x9-163020r925"></a>         <span id="textcolor2883">executable</span><span id="textcolor2884">=</span><span id="textcolor2885">'</span><span id="textcolor2886">turtlesim_node</span><span id="textcolor2887">'</span><span id="textcolor2888">,</span> <span id="textcolor2889">output</span><span id="textcolor2890">=</span><span id="textcolor2891">'</span><span id="textcolor2892">screen</span><span id="textcolor2893">'</span><span id="textcolor2894">)</span><span id="textcolor2895">,</span> 
<a id="x9-163022r926"></a>      <span id="textcolor2896">launch_ros</span><span id="textcolor2897">.</span><span id="textcolor2898">actions</span><span id="textcolor2899">.</span><span id="textcolor2900">Node</span><span id="textcolor2901">(</span> 
<a id="x9-163024r927"></a>         <span id="textcolor2902">namespace</span><span id="textcolor2903">=</span><span id="textcolor2904">'</span><span id="textcolor2905">turtlesim2</span><span id="textcolor2906">'</span><span id="textcolor2907">,</span> <span id="textcolor2908">package</span><span id="textcolor2909">=</span><span id="textcolor2910">'</span><span id="textcolor2911">turtlesim</span><span id="textcolor2912">'</span><span id="textcolor2913">,</span> 
<a id="x9-163026r928"></a>         <span id="textcolor2914">executable</span><span id="textcolor2915">=</span><span id="textcolor2916">'</span><span id="textcolor2917">turtlesim_node</span><span id="textcolor2918">'</span><span id="textcolor2919">,</span> <span id="textcolor2920">output</span><span id="textcolor2921">=</span><span id="textcolor2922">'</span><span id="textcolor2923">screen</span><span id="textcolor2924">'</span><span id="textcolor2925">)</span><span id="textcolor2926">,</span> 
<a id="x9-163028r929"></a>   <span id="textcolor2927">]</span><span id="textcolor2928">)</span></div></pre>
     </div>
     <div class="knowledge">
      <p class="noindent">
       The
launch
file
above
is
written
in
Python,
but
we
can
also
                                                                                
                                                                                
                                                                              
use
XML
and
YAML
to
create
launch
files.
We
can
see
a
comparison
of
these
different
       <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
        ROS
       </a>
       launch
formats
in
Using
XML,
YAML,
and
Python
for
       <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
        ROS
       </a>
       Launch
Files.
      </p>
     </div>
     <p class="noindent">
      If
this
is
working
well,
then
we
should
see
two
turtlesim
environments
popping
up.
This
will
run
two
<alert style="color: #821131;">(2)</alert> turtlesim
nodes.
      <a id="paragraph*.59">
      </a>
     </p>
     <p class="noindent">
      <span class="paragraphHead">
       <a id="x9-164000">
       </a>
       Controlling
the
Nodes
      </span>
      Now
that
these
nodes
are
running,
we
can
control
them
                                                                                
                                                                                
                                                                             
like
any
other
      <a class="glossary" href="MobileRoboticsLectureBookli2.html#glo:ros">
       ROS
      </a>
      nodes.
For
example,
we
can
make
the
turtles
drive
in
opposite
directions
by
opening
up
two
additional
terminals
and
running
the
following
commands:
     </p>
     <p class="noindent">
      In
a
second
terminal:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb230" style="padding:20px;border-radius: 3px;"><a id="x9-164002r934"></a>ros2<span id="textcolor2929"> </span>topic<span id="textcolor2930"> </span>pub<span id="textcolor2931">  </span>/turtlesim1/turtle1/cmd_vel<span id="textcolor2932"> </span>geometry_msgs/msg/Twist<span id="textcolor2933"> </span><span id="textcolor2934">"{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}"</span></div></pre>
     </div>
     <p class="noindent">
      In
a
third
terminal:
     </p>
     <p class="noindent">
     </p>
     <div class="code-block">
      <div class="code-lang">
       bash
      </div>
      <pre><div class="language-bash" id="fancyvrb231" style="padding:20px;border-radius: 3px;"><a id="x9-164004r939"></a>ros2<span id="textcolor2935"> </span>topic<span id="textcolor2936"> </span>pub<span id="textcolor2937">  </span>/turtlesim2/turtle1/cmd_vel<span id="textcolor2938"> </span>geometry_msgs/msg/Twist<span id="textcolor2939"> </span><span id="textcolor2940">"{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: -1.8}}"</span></div></pre>
     </div>
     <p class="noindent">
      After
running
these
commands,
we
should
see
the
two
turtles
in
their
respective
envrionment
spinning
like
a
record.
     </p>
    </div>
   </article>
   <footer>
    <div class="next">
     <p class="noindent">
      <a href="MobileRoboticsLectureBookli2.html" style="float: right;">
       Next Chapter →
      </a>
      <a href="MobileRoboticsLectureBookch6.html" style="float: left;">
       ← Previous Chapter
      </a>
     </p>
    </div>
   </footer>
  </div>
  <p class="noindent">
  </p>
  <p class="noindent">
   <a id="likesection.60">
   </a>
   <a id="x9-164005x">
   </a>
  </p>
  <p class="noindent">
   <a id="tailMobileRoboticsLectureBookch7.html">
   </a>
  </p>
  <div class="lowernav">
   <a href="#home">
    Main TOC
   </a>
   <a href="#news">
    Glossary
   </a>
   <a href="#contact">
    Bibliography
   </a>
   <a href="#about">
    Home
   </a>
  </div>
 </body>
</html>
